"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
var ReactComponents_eventinspector;
(self["webpackChunkReactComponents_"] = self["webpackChunkReactComponents_"] || []).push([["eventinspector"],{

/***/ "./CommonScripts/eventinspector.js":
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EventInspectorResourcesTabContextMenu\": function() { return /* reexport safe */ _eventinspector_eventinspector_resourcestab_contextmenu__WEBPACK_IMPORTED_MODULE_1__.EventInspectorResourcesTabContextMenu; },\n/* harmony export */   \"EventInspectorSchedulesTabContextMenu\": function() { return /* reexport safe */ _eventinspector_eventinspector_schedulestab_contextmenu__WEBPACK_IMPORTED_MODULE_2__.EventInspectorSchedulesTabContextMenu; },\n/* harmony export */   \"isAtScrollBottom\": function() { return /* reexport safe */ _eventinspector_eventinspector_ui_control__WEBPACK_IMPORTED_MODULE_0__.isAtScrollBottom; },\n/* harmony export */   \"resourceGroupCheckboxClicked\": function() { return /* reexport safe */ _eventinspector_eventinspector_ui_control__WEBPACK_IMPORTED_MODULE_0__.resourceGroupCheckboxClicked; },\n/* harmony export */   \"scrollElementVisibleIn\": function() { return /* reexport safe */ _eventinspector_eventinspector_ui_control__WEBPACK_IMPORTED_MODULE_0__.scrollElementVisibleIn; },\n/* harmony export */   \"summaryEntryCheckboxClicked\": function() { return /* reexport safe */ _eventinspector_eventinspector_ui_control__WEBPACK_IMPORTED_MODULE_0__.summaryEntryCheckboxClicked; },\n/* harmony export */   \"summaryEntryContextMenuClose\": function() { return /* reexport safe */ _eventinspector_eventinspector_ui_control__WEBPACK_IMPORTED_MODULE_0__.summaryEntryContextMenuClose; },\n/* harmony export */   \"summaryEntryContextMenuOpen\": function() { return /* reexport safe */ _eventinspector_eventinspector_ui_control__WEBPACK_IMPORTED_MODULE_0__.summaryEntryContextMenuOpen; },\n/* harmony export */   \"updateResourceGroupCheckboxForListItem\": function() { return /* reexport safe */ _eventinspector_eventinspector_ui_control__WEBPACK_IMPORTED_MODULE_0__.updateResourceGroupCheckboxForListItem; }\n/* harmony export */ });\n/* harmony import */ var _eventinspector_eventinspector_ui_control__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./CommonScripts/eventinspector/eventinspector-ui-control.js\");\n/* harmony import */ var _eventinspector_eventinspector_resourcestab_contextmenu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./CommonScripts/eventinspector/eventinspector-resourcestab-contextmenu.js\");\n/* harmony import */ var _eventinspector_eventinspector_schedulestab_contextmenu__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./CommonScripts/eventinspector/eventinspector-schedulestab-contextmenu.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Db21tb25TY3JpcHRzL2V2ZW50aW5zcGVjdG9yLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SZWFjdENvbXBvbmVudHNfLy4vQ29tbW9uU2NyaXB0cy9ldmVudGluc3BlY3Rvci5qcz9iZDA2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZXZlbnRpbnNwZWN0b3IvZXZlbnRpbnNwZWN0b3ItdWktY29udHJvbCc7XG5leHBvcnQgKiBmcm9tICcuL2V2ZW50aW5zcGVjdG9yL2V2ZW50aW5zcGVjdG9yLXJlc291cmNlc3RhYi1jb250ZXh0bWVudSc7XG5leHBvcnQgKiBmcm9tICcuL2V2ZW50aW5zcGVjdG9yL2V2ZW50aW5zcGVjdG9yLXNjaGVkdWxlc3RhYi1jb250ZXh0bWVudSc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./CommonScripts/eventinspector.js\n");

/***/ }),

/***/ "./CommonScripts/eventinspector/eventinspector-contextmenu.js":
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EventInspectorContextMenu\": function() { return /* binding */ EventInspectorContextMenu; }\n/* harmony export */ });\n/* harmony import */ var _sharedscripts_sharedscripts_contextmenucalendarandinspectors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./CommonScripts/sharedscripts/sharedscripts-contextmenucalendarandinspectors.js\");\n/* harmony import */ var _eventinspector_ui_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./CommonScripts/eventinspector/eventinspector-ui-control.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\nvar EventInspectorContextMenu = /*#__PURE__*/function (_ContextMenuForCalend) {\n  _inherits(EventInspectorContextMenu, _ContextMenuForCalend);\n  var _super = _createSuper(EventInspectorContextMenu);\n  function EventInspectorContextMenu() {\n    _classCallCheck(this, EventInspectorContextMenu);\n    return _super.apply(this, arguments);\n  }\n  _createClass(EventInspectorContextMenu, [{\n    key: \"setPermissions\",\n    value: function setPermissions(contextMenuOpenEvent) {\n      var menuName = this.menuIdentifier();\n      // Gather the shared permissions for all the selected checkboxes\n      var currentSelection = $('.dev-summary-checkbox:checked');\n      var selectionPermissions = _.map(currentSelection, function (el) {\n        // Get the permissions of the element\n        // If it contains add to set then add a marker class to the resource row such that we know that a set is selected\n        var permissions = JSON.parse($(el).attr('permissions'));\n        if (_.contains(permissions, 'addToSet')) $(el).closest('.dev-resource-row').addClass('dev-can-add-to-set');\n        return {\n          el: el,\n          permissions: permissions\n        };\n      });\n      // Go over the selection permissions; if there is a resource row that has \"addToSet, then add it too to the lower lying row\"\n      _.each(selectionPermissions, function (obj) {\n        if ($(obj.el).closest('.dev-resource-row.dev-can-add-to-set').length > 0) obj.permissions.push('addToSet');\n      });\n      $('.dev-can-add-to-set').removeClass('dev-can-add-to-set');\n      if (currentSelection.length === 0) {\n        var permissionString = $(contextMenuOpenEvent.target).closest('.dev-event-passenger').attr('permissions');\n        var eventPermissions = permissionString !== undefined ? JSON.parse(permissionString) : [];\n        // Turn off all menu items\n        $(\"#\".concat(menuName, \" li [permissions]\")).attr('isDisable', 'true');\n        // Turn off all menu items\n        $(\"#\".concat(menuName, \" li > a\")).attr('isDisable', 'true');\n        return eventPermissions;\n      } else {\n        // Calculate all common permission (shared by all selected objects)\n        var objectPermissions = _.map(selectionPermissions, function (obj) {\n          return obj.permissions;\n        });\n        var permissions = _.intersection.apply(null, objectPermissions);\n\n        // Turn off all menu items\n        $(\"#\".concat(menuName, \" li [permissions]\")).attr('isDisable', 'true');\n        // Apply all common permissions\n        for (var i = 0; i < permissions.length; i++) {\n          $(\"#\".concat(menuName, \" li a[permissions=\").concat(permissions[i], \"]\")).not('.disabled').removeAttr('isDisable');\n        }\n\n        // Calculate whether there is an object having the infoOfSet permission turned on\n        var turnOnInfoOfSet = _.any(objectPermissions, function (perms) {\n          return _.contains(perms, 'infoOfSet');\n        });\n        if (turnOnInfoOfSet) $(\"#\".concat(menuName, \" li a[permissions=infoOfSet]\")).not('.disabled').removeAttr('isDisable');\n        return permissions;\n      }\n    }\n  }, {\n    key: \"beforeMenuOpen\",\n    value: function beforeMenuOpen(contextMenuOpenEvent) {\n      if (!contextMenuOpenEvent) {\n        return;\n      }\n      this.ensurePreviousContextMenuSelectionRemoved();\n\n      // If the entry on which the menu was opened is not selected, then select it (potentially) recursively\n      // Indicate by means of a marker class that the entry was selected via the context menu\n      var contextMenuSelection = $(contextMenuOpenEvent.target);\n      if (!contextMenuSelection.closest('li').hasClass('ui-selected')) {\n        // Find all the list items in the entire hierarchy that do not have a selection state.\n        var liInHierarchyWithoutSelection = contextMenuSelection.closest('.inspector-list').find('li:not(.ui-selected)');\n\n        // Set the selection state of the context-menu focus\n        var checkbox = contextMenuSelection.closest('li').find('div.lined-list-row-select>input.dev-summary-checkbox').first();\n        checkbox.prop('checked', true);\n        (0,_eventinspector_ui_control__WEBPACK_IMPORTED_MODULE_1__.summaryEntryCheckboxClicked)(checkbox);\n\n        // Set a marker class on all of the listitems in the hierarchy that were not selected before but are now\n        liInHierarchyWithoutSelection.filter('.ui-selected').addClass('dev-selected-by-menu');\n      }\n    }\n  }, {\n    key: \"ensurePreviousContextMenuSelectionRemoved\",\n    value: function ensurePreviousContextMenuSelectionRemoved() {\n      // When closing the context menu, we need to remove the selection of all the elements in the tree that were set by opening the context menu\n      var setByMenu = $('.dev-selected-by-menu');\n      setByMenu.each(function (index, element) {\n        var li = $(element);\n        li.removeClass('ui-selected').removeClass('dev-selected-by-menu');\n        li.find('div.lined-list-row-select>input.dev-summary-checkbox').first().prop('checked', false);\n        (0,_eventinspector_ui_control__WEBPACK_IMPORTED_MODULE_1__.updateResourceGroupCheckboxForListItem)(li);\n      });\n    }\n  }, {\n    key: \"beforeMenuClose\",\n    value: function beforeMenuClose() {\n      this.ensurePreviousContextMenuSelectionRemoved();\n    }\n  }, {\n    key: \"afterMenuClose\",\n    value: function afterMenuClose() {\n      // Nothing required for now\n    }\n  }, {\n    key: \"menuOptions\",\n    value: function menuOptions() {\n      var _this = this;\n      return {\n        closeOnMouseOut: true,\n        onCloseMouseOut: function onCloseMouseOut() {\n          return _this.close();\n        },\n        containerCssClasses: ['cal-context-menu'],\n        subMenuCssClasses: ['submenu']\n      };\n    }\n  }, {\n    key: \"actionCallbackContext\",\n    value: function actionCallbackContext() {\n      var checkedItems = $('.dev-summary-checkbox:checked').toArray();\n      return {\n        summaryItems: $(checkedItems).closest('.dev-entry-passenger').map(function (idx, item) {\n          return $(item).attr('id');\n        }).toArray(),\n        events: $(checkedItems).map(function (idx, item) {\n          return $(item).closest('.dev-event-passenger').attr('id');\n        }).toArray(),\n        event: $(this.contextMenuTarget).closest('.dev-event-passenger').attr('id')\n      };\n    }\n  }]);\n  return EventInspectorContextMenu;\n}(_sharedscripts_sharedscripts_contextmenucalendarandinspectors__WEBPACK_IMPORTED_MODULE_0__.ContextMenuForCalendarsAndInspectors);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Db21tb25TY3JpcHRzL2V2ZW50aW5zcGVjdG9yL2V2ZW50aW5zcGVjdG9yLWNvbnRleHRtZW51LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQTtBQUNBO0FBSUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUmVhY3RDb21wb25lbnRzXy8uL0NvbW1vblNjcmlwdHMvZXZlbnRpbnNwZWN0b3IvZXZlbnRpbnNwZWN0b3ItY29udGV4dG1lbnUuanM/NGUyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb250ZXh0TWVudUZvckNhbGVuZGFyc0FuZEluc3BlY3RvcnMgfSBmcm9tICcuLi9zaGFyZWRzY3JpcHRzL3NoYXJlZHNjcmlwdHMtY29udGV4dG1lbnVjYWxlbmRhcmFuZGluc3BlY3RvcnMnO1xuaW1wb3J0IHsgc3VtbWFyeUVudHJ5Q2hlY2tib3hDbGlja2VkLCB1cGRhdGVSZXNvdXJjZUdyb3VwQ2hlY2tib3hGb3JMaXN0SXRlbSB9IGZyb20gJy4vZXZlbnRpbnNwZWN0b3ItdWktY29udHJvbCc7XG5cbmV4cG9ydCBjbGFzcyBFdmVudEluc3BlY3RvckNvbnRleHRNZW51IGV4dGVuZHMgQ29udGV4dE1lbnVGb3JDYWxlbmRhcnNBbmRJbnNwZWN0b3JzIHtcblxuICBzZXRQZXJtaXNzaW9ucyhjb250ZXh0TWVudU9wZW5FdmVudCkge1xuICAgIGNvbnN0IG1lbnVOYW1lID0gdGhpcy5tZW51SWRlbnRpZmllcigpO1xuICAgIC8vIEdhdGhlciB0aGUgc2hhcmVkIHBlcm1pc3Npb25zIGZvciBhbGwgdGhlIHNlbGVjdGVkIGNoZWNrYm94ZXNcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0aW9uID0gJCgnLmRldi1zdW1tYXJ5LWNoZWNrYm94OmNoZWNrZWQnKTtcbiAgICBjb25zdCBzZWxlY3Rpb25QZXJtaXNzaW9ucyA9IF8ubWFwKGN1cnJlbnRTZWxlY3Rpb24sIChlbCkgPT4ge1xuICAgICAgLy8gR2V0IHRoZSBwZXJtaXNzaW9ucyBvZiB0aGUgZWxlbWVudFxuICAgICAgLy8gSWYgaXQgY29udGFpbnMgYWRkIHRvIHNldCB0aGVuIGFkZCBhIG1hcmtlciBjbGFzcyB0byB0aGUgcmVzb3VyY2Ugcm93IHN1Y2ggdGhhdCB3ZSBrbm93IHRoYXQgYSBzZXQgaXMgc2VsZWN0ZWRcbiAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gSlNPTi5wYXJzZSgkKGVsKS5hdHRyKCdwZXJtaXNzaW9ucycpKTtcbiAgICAgIGlmIChfLmNvbnRhaW5zKHBlcm1pc3Npb25zLCAnYWRkVG9TZXQnKSlcbiAgICAgICAgJChlbCkuY2xvc2VzdCgnLmRldi1yZXNvdXJjZS1yb3cnKS5hZGRDbGFzcygnZGV2LWNhbi1hZGQtdG8tc2V0Jyk7XG4gICAgICByZXR1cm4geyBlbCwgcGVybWlzc2lvbnMgfTtcbiAgICB9KTtcbiAgICAvLyBHbyBvdmVyIHRoZSBzZWxlY3Rpb24gcGVybWlzc2lvbnM7IGlmIHRoZXJlIGlzIGEgcmVzb3VyY2Ugcm93IHRoYXQgaGFzIFwiYWRkVG9TZXQsIHRoZW4gYWRkIGl0IHRvbyB0byB0aGUgbG93ZXIgbHlpbmcgcm93XCJcbiAgICBfLmVhY2goc2VsZWN0aW9uUGVybWlzc2lvbnMsIChvYmopID0+IHtcbiAgICAgIGlmICgkKG9iai5lbCkuY2xvc2VzdCgnLmRldi1yZXNvdXJjZS1yb3cuZGV2LWNhbi1hZGQtdG8tc2V0JykubGVuZ3RoID4gMClcbiAgICAgICAgb2JqLnBlcm1pc3Npb25zLnB1c2goJ2FkZFRvU2V0Jyk7XG4gICAgfSk7XG5cbiAgICAkKCcuZGV2LWNhbi1hZGQtdG8tc2V0JykucmVtb3ZlQ2xhc3MoJ2Rldi1jYW4tYWRkLXRvLXNldCcpO1xuXG4gICAgaWYgKGN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBwZXJtaXNzaW9uU3RyaW5nID0gJChjb250ZXh0TWVudU9wZW5FdmVudC50YXJnZXQpLmNsb3Nlc3QoJy5kZXYtZXZlbnQtcGFzc2VuZ2VyJykuYXR0cigncGVybWlzc2lvbnMnKTtcbiAgICAgIGNvbnN0IGV2ZW50UGVybWlzc2lvbnMgPSBwZXJtaXNzaW9uU3RyaW5nICE9PSB1bmRlZmluZWQgPyBKU09OLnBhcnNlKHBlcm1pc3Npb25TdHJpbmcpIDogW107XG4gICAgICAvLyBUdXJuIG9mZiBhbGwgbWVudSBpdGVtc1xuICAgICAgJChgIyR7bWVudU5hbWV9IGxpIFtwZXJtaXNzaW9uc11gKS5hdHRyKCdpc0Rpc2FibGUnLCAndHJ1ZScpO1xuICAgICAgLy8gVHVybiBvZmYgYWxsIG1lbnUgaXRlbXNcbiAgICAgICQoYCMke21lbnVOYW1lfSBsaSA+IGFgKS5hdHRyKCdpc0Rpc2FibGUnLCAndHJ1ZScpO1xuICAgICAgcmV0dXJuIGV2ZW50UGVybWlzc2lvbnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENhbGN1bGF0ZSBhbGwgY29tbW9uIHBlcm1pc3Npb24gKHNoYXJlZCBieSBhbGwgc2VsZWN0ZWQgb2JqZWN0cylcbiAgICAgIGNvbnN0IG9iamVjdFBlcm1pc3Npb25zID0gXy5tYXAoc2VsZWN0aW9uUGVybWlzc2lvbnMsICAob2JqKSA9PiB7XG4gICAgICAgIHJldHVybiBvYmoucGVybWlzc2lvbnM7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gXy5pbnRlcnNlY3Rpb24uYXBwbHkobnVsbCwgb2JqZWN0UGVybWlzc2lvbnMpO1xuXG4gICAgICAvLyBUdXJuIG9mZiBhbGwgbWVudSBpdGVtc1xuICAgICAgJChgIyR7bWVudU5hbWV9IGxpIFtwZXJtaXNzaW9uc11gKS5hdHRyKCdpc0Rpc2FibGUnLCAndHJ1ZScpO1xuICAgICAgLy8gQXBwbHkgYWxsIGNvbW1vbiBwZXJtaXNzaW9uc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwZXJtaXNzaW9ucy5sZW5ndGg7IGkrKylcbiAgICAgICAgJChgIyR7bWVudU5hbWV9IGxpIGFbcGVybWlzc2lvbnM9JHtwZXJtaXNzaW9uc1tpXX1dYClcbiAgICAgICAgICAubm90KCcuZGlzYWJsZWQnKVxuICAgICAgICAgIC5yZW1vdmVBdHRyKCdpc0Rpc2FibGUnKTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHdoZXRoZXIgdGhlcmUgaXMgYW4gb2JqZWN0IGhhdmluZyB0aGUgaW5mb09mU2V0IHBlcm1pc3Npb24gdHVybmVkIG9uXG4gICAgICBjb25zdCB0dXJuT25JbmZvT2ZTZXQgPSBfLmFueShvYmplY3RQZXJtaXNzaW9ucywgKHBlcm1zKSA9PiB7XG4gICAgICAgIHJldHVybiBfLmNvbnRhaW5zKHBlcm1zLCAnaW5mb09mU2V0Jyk7XG4gICAgICB9KTtcbiAgICAgIGlmICh0dXJuT25JbmZvT2ZTZXQpXG4gICAgICAgICQoYCMke21lbnVOYW1lfSBsaSBhW3Blcm1pc3Npb25zPWluZm9PZlNldF1gKS5ub3QoJy5kaXNhYmxlZCcpLnJlbW92ZUF0dHIoJ2lzRGlzYWJsZScpO1xuICAgICAgcmV0dXJuIHBlcm1pc3Npb25zO1xuICAgIH1cbiAgfVxuXG4gIGJlZm9yZU1lbnVPcGVuKGNvbnRleHRNZW51T3BlbkV2ZW50KSB7XG4gICAgaWYgKCFjb250ZXh0TWVudU9wZW5FdmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZW5zdXJlUHJldmlvdXNDb250ZXh0TWVudVNlbGVjdGlvblJlbW92ZWQoKTtcblxuICAgIC8vIElmIHRoZSBlbnRyeSBvbiB3aGljaCB0aGUgbWVudSB3YXMgb3BlbmVkIGlzIG5vdCBzZWxlY3RlZCwgdGhlbiBzZWxlY3QgaXQgKHBvdGVudGlhbGx5KSByZWN1cnNpdmVseVxuICAgIC8vIEluZGljYXRlIGJ5IG1lYW5zIG9mIGEgbWFya2VyIGNsYXNzIHRoYXQgdGhlIGVudHJ5IHdhcyBzZWxlY3RlZCB2aWEgdGhlIGNvbnRleHQgbWVudVxuICAgIGNvbnN0IGNvbnRleHRNZW51U2VsZWN0aW9uID0gJChjb250ZXh0TWVudU9wZW5FdmVudC50YXJnZXQpO1xuICAgIGlmICghY29udGV4dE1lbnVTZWxlY3Rpb24uY2xvc2VzdCgnbGknKS5oYXNDbGFzcygndWktc2VsZWN0ZWQnKSkge1xuICAgICAgLy8gRmluZCBhbGwgdGhlIGxpc3QgaXRlbXMgaW4gdGhlIGVudGlyZSBoaWVyYXJjaHkgdGhhdCBkbyBub3QgaGF2ZSBhIHNlbGVjdGlvbiBzdGF0ZS5cbiAgICAgIGNvbnN0IGxpSW5IaWVyYXJjaHlXaXRob3V0U2VsZWN0aW9uID0gY29udGV4dE1lbnVTZWxlY3Rpb25cbiAgICAgICAgLmNsb3Nlc3QoJy5pbnNwZWN0b3ItbGlzdCcpXG4gICAgICAgIC5maW5kKCdsaTpub3QoLnVpLXNlbGVjdGVkKScpO1xuXG4gICAgICAvLyBTZXQgdGhlIHNlbGVjdGlvbiBzdGF0ZSBvZiB0aGUgY29udGV4dC1tZW51IGZvY3VzXG4gICAgICBjb25zdCBjaGVja2JveCA9IGNvbnRleHRNZW51U2VsZWN0aW9uXG4gICAgICAgIC5jbG9zZXN0KCdsaScpXG4gICAgICAgIC5maW5kKCdkaXYubGluZWQtbGlzdC1yb3ctc2VsZWN0PmlucHV0LmRldi1zdW1tYXJ5LWNoZWNrYm94JylcbiAgICAgICAgLmZpcnN0KCk7XG4gICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICBzdW1tYXJ5RW50cnlDaGVja2JveENsaWNrZWQoY2hlY2tib3gpO1xuXG4gICAgICAvLyBTZXQgYSBtYXJrZXIgY2xhc3Mgb24gYWxsIG9mIHRoZSBsaXN0aXRlbXMgaW4gdGhlIGhpZXJhcmNoeSB0aGF0IHdlcmUgbm90IHNlbGVjdGVkIGJlZm9yZSBidXQgYXJlIG5vd1xuICAgICAgbGlJbkhpZXJhcmNoeVdpdGhvdXRTZWxlY3Rpb24uZmlsdGVyKCcudWktc2VsZWN0ZWQnKS5hZGRDbGFzcygnZGV2LXNlbGVjdGVkLWJ5LW1lbnUnKTtcbiAgICB9XG4gIH1cblxuICBlbnN1cmVQcmV2aW91c0NvbnRleHRNZW51U2VsZWN0aW9uUmVtb3ZlZCgpIHtcbiAgICAvLyBXaGVuIGNsb3NpbmcgdGhlIGNvbnRleHQgbWVudSwgd2UgbmVlZCB0byByZW1vdmUgdGhlIHNlbGVjdGlvbiBvZiBhbGwgdGhlIGVsZW1lbnRzIGluIHRoZSB0cmVlIHRoYXQgd2VyZSBzZXQgYnkgb3BlbmluZyB0aGUgY29udGV4dCBtZW51XG4gICAgY29uc3Qgc2V0QnlNZW51ID0gJCgnLmRldi1zZWxlY3RlZC1ieS1tZW51Jyk7XG4gICAgc2V0QnlNZW51LmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoZWxlbWVudCk7XG4gICAgICBsaS5yZW1vdmVDbGFzcygndWktc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnZGV2LXNlbGVjdGVkLWJ5LW1lbnUnKTtcbiAgICAgIGxpLmZpbmQoJ2Rpdi5saW5lZC1saXN0LXJvdy1zZWxlY3Q+aW5wdXQuZGV2LXN1bW1hcnktY2hlY2tib3gnKS5maXJzdCgpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICB1cGRhdGVSZXNvdXJjZUdyb3VwQ2hlY2tib3hGb3JMaXN0SXRlbShsaSk7XG4gICAgfSk7XG4gIH1cblxuICBiZWZvcmVNZW51Q2xvc2UoKSB7XG4gICAgdGhpcy5lbnN1cmVQcmV2aW91c0NvbnRleHRNZW51U2VsZWN0aW9uUmVtb3ZlZCgpO1xuICB9XG5cbiAgYWZ0ZXJNZW51Q2xvc2UoKSB7XG4gICAgLy8gTm90aGluZyByZXF1aXJlZCBmb3Igbm93XG4gIH1cblxuICBtZW51T3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xvc2VPbk1vdXNlT3V0OiB0cnVlLFxuICAgICAgb25DbG9zZU1vdXNlT3V0OiAoKSA9PiB0aGlzLmNsb3NlKCksXG4gICAgICBjb250YWluZXJDc3NDbGFzc2VzOiBbICdjYWwtY29udGV4dC1tZW51JyBdLFxuICAgICAgc3ViTWVudUNzc0NsYXNzZXM6IFsgJ3N1Ym1lbnUnIF1cbiAgICB9O1xuICB9XG5cbiAgYWN0aW9uQ2FsbGJhY2tDb250ZXh0KCkge1xuICAgIGNvbnN0IGNoZWNrZWRJdGVtcyA9ICQoJy5kZXYtc3VtbWFyeS1jaGVja2JveDpjaGVja2VkJykudG9BcnJheSgpO1xuICAgIHJldHVybiB7XG4gICAgICBzdW1tYXJ5SXRlbXM6ICQoY2hlY2tlZEl0ZW1zKS5jbG9zZXN0KCcuZGV2LWVudHJ5LXBhc3NlbmdlcicpLm1hcCgoaWR4LCBpdGVtKSA9PiAkKGl0ZW0pLmF0dHIoJ2lkJykpLnRvQXJyYXkoKSxcbiAgICAgIGV2ZW50czogJChjaGVja2VkSXRlbXMpLm1hcCgoaWR4LCBpdGVtKSA9PiAkKGl0ZW0pLmNsb3Nlc3QoJy5kZXYtZXZlbnQtcGFzc2VuZ2VyJykuYXR0cignaWQnKSkudG9BcnJheSgpLFxuICAgICAgZXZlbnQ6ICQodGhpcy5jb250ZXh0TWVudVRhcmdldCkuY2xvc2VzdCgnLmRldi1ldmVudC1wYXNzZW5nZXInKS5hdHRyKCdpZCcpXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./CommonScripts/eventinspector/eventinspector-contextmenu.js\n");

/***/ }),

/***/ "./CommonScripts/eventinspector/eventinspector-resourcestab-contextmenu.js":
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EventInspectorResourcesTabContextMenu\": function() { return /* binding */ EventInspectorResourcesTabContextMenu; }\n/* harmony export */ });\n/* harmony import */ var _eventinspector_contextmenu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./CommonScripts/eventinspector/eventinspector-contextmenu.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar EventInspectorResourcesTabContextMenu = /*#__PURE__*/function (_EventInspectorContex) {\n  _inherits(EventInspectorResourcesTabContextMenu, _EventInspectorContex);\n  var _super = _createSuper(EventInspectorResourcesTabContextMenu);\n  function EventInspectorResourcesTabContextMenu(configuration) {\n    var _this;\n    _classCallCheck(this, EventInspectorResourcesTabContextMenu);\n    _this = _super.call(this, configuration);\n    _this.canPaste = configuration.hasClipboardContents;\n    return _this;\n  }\n  _createClass(EventInspectorResourcesTabContextMenu, [{\n    key: \"menuItems\",\n    value: function menuItems() {\n      var _this2 = this;\n      return [this.actionItem('info'), this.actionItem('infoOfSet'), this.separator(), this.actionItem('copy'), this.actionItem('paste', {\n        disableif: function disableif() {\n          return !_this2.canPaste;\n        }\n      }), this.separator(), this.actionItem('addToSet'), this.submenu('swapAll', [this.search(this.configuration.swapResourcePlaceholder, _.debounce(this.configuration.swapResourceAutocomplete, 200), this.configuration.swapAllCallback, {\n        minLength: 0,\n        withPresets: true\n      })]), this.submenu('swapOne', [this.search(this.configuration.swapResourcePlaceholder, _.debounce(this.configuration.swapResourceAutocomplete, 200), this.configuration.swapOneCallback, {\n        minLength: 0,\n        withPresets: true\n      })]), this.separator(), this.actionItem('remove')];\n    }\n  }, {\n    key: \"menuIdentifier\",\n    value: function menuIdentifier() {\n      return 'resourceUseMenu';\n    }\n  }, {\n    key: \"setPermissions\",\n    value: function setPermissions(contextMenuOpenEvent) {\n      var target = $(contextMenuOpenEvent.target);\n      var permissions = _get(_getPrototypeOf(EventInspectorResourcesTabContextMenu.prototype), \"setPermissions\", this).call(this, contextMenuOpenEvent);\n      var pasteAction = this.configuration.actions.paste;\n      // If the paste link does not have the disabled class, and there is a pastable event found then enable the action\n      // only of the right permissions apply\n      var pasteMenuItem = $(\"#\".concat(this.menuIdentifier(), \" li[data-menu-id=\").concat(pasteAction.id, \"]\"));\n      var hasPastePermission = permissions.some(function (permString) {\n        return permString === \"paste\";\n      });\n      if (!hasPastePermission || pasteMenuItem.hasClass('disabled') || $(target).closest('.dev-event-passenger').length === 0) {\n        pasteMenuItem.attr('isDisable', 'true');\n        pasteMenuItem.find('> a').attr('isDisable', 'true');\n      } else {\n        pasteMenuItem.removeAttr('isDisable');\n        pasteMenuItem.find('> a').removeAttr('isDisable');\n      }\n    }\n  }, {\n    key: \"setPasteEnablement\",\n    value: function setPasteEnablement(shouldBeEnabled) {\n      this.canPaste = shouldBeEnabled;\n    }\n  }]);\n  return EventInspectorResourcesTabContextMenu;\n}(_eventinspector_contextmenu__WEBPACK_IMPORTED_MODULE_0__.EventInspectorContextMenu);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Db21tb25TY3JpcHRzL2V2ZW50aW5zcGVjdG9yL2V2ZW50aW5zcGVjdG9yLXJlc291cmNlc3RhYi1jb250ZXh0bWVudS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBU0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SZWFjdENvbXBvbmVudHNfLy4vQ29tbW9uU2NyaXB0cy9ldmVudGluc3BlY3Rvci9ldmVudGluc3BlY3Rvci1yZXNvdXJjZXN0YWItY29udGV4dG1lbnUuanM/YTBhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEluc3BlY3RvckNvbnRleHRNZW51IH0gZnJvbSAnLi9ldmVudGluc3BlY3Rvci1jb250ZXh0bWVudSc7XG5cbmV4cG9ydCBjbGFzcyBFdmVudEluc3BlY3RvclJlc291cmNlc1RhYkNvbnRleHRNZW51IGV4dGVuZHMgRXZlbnRJbnNwZWN0b3JDb250ZXh0TWVudSB7XG5cbiAgY29uc3RydWN0b3IoY29uZmlndXJhdGlvbikge1xuICAgIHN1cGVyKGNvbmZpZ3VyYXRpb24pO1xuICAgIHRoaXMuY2FuUGFzdGUgPSBjb25maWd1cmF0aW9uLmhhc0NsaXBib2FyZENvbnRlbnRzO1xuICB9XG5cbiAgbWVudUl0ZW1zKCkge1xuICAgIHJldHVybiBbXG4gICAgICB0aGlzLmFjdGlvbkl0ZW0oJ2luZm8nKSxcbiAgICAgIHRoaXMuYWN0aW9uSXRlbSgnaW5mb09mU2V0JyksXG4gICAgICB0aGlzLnNlcGFyYXRvcigpLFxuICAgICAgdGhpcy5hY3Rpb25JdGVtKCdjb3B5JyksXG4gICAgICB0aGlzLmFjdGlvbkl0ZW0oJ3Bhc3RlJywgeyBkaXNhYmxlaWY6ICgpID0+ICF0aGlzLmNhblBhc3RlIH0pLFxuICAgICAgdGhpcy5zZXBhcmF0b3IoKSxcbiAgICAgIHRoaXMuYWN0aW9uSXRlbSgnYWRkVG9TZXQnKSxcbiAgICAgIHRoaXMuc3VibWVudSgnc3dhcEFsbCcsICBbXG4gICAgICAgIHRoaXMuc2VhcmNoKFxuICAgICAgICAgIHRoaXMuY29uZmlndXJhdGlvbi5zd2FwUmVzb3VyY2VQbGFjZWhvbGRlcixcbiAgICAgICAgICBfLmRlYm91bmNlKHRoaXMuY29uZmlndXJhdGlvbi5zd2FwUmVzb3VyY2VBdXRvY29tcGxldGUsIDIwMCksXG4gICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uLnN3YXBBbGxDYWxsYmFjayxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtaW5MZW5ndGg6IDAsXG4gICAgICAgICAgICB3aXRoUHJlc2V0czogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICBdKSxcbiAgICAgIHRoaXMuc3VibWVudSgnc3dhcE9uZScsIFtcbiAgICAgICAgdGhpcy5zZWFyY2goXG4gICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uLnN3YXBSZXNvdXJjZVBsYWNlaG9sZGVyLFxuICAgICAgICAgIF8uZGVib3VuY2UodGhpcy5jb25maWd1cmF0aW9uLnN3YXBSZXNvdXJjZUF1dG9jb21wbGV0ZSwgMjAwKSxcbiAgICAgICAgICB0aGlzLmNvbmZpZ3VyYXRpb24uc3dhcE9uZUNhbGxiYWNrLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbkxlbmd0aDogMCxcbiAgICAgICAgICAgIHdpdGhQcmVzZXRzOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgIF0pLFxuICAgICAgdGhpcy5zZXBhcmF0b3IoKSxcbiAgICAgIHRoaXMuYWN0aW9uSXRlbSgncmVtb3ZlJyksXG4gICAgXTtcbiAgfVxuXG4gIG1lbnVJZGVudGlmaWVyKCkge1xuICAgIHJldHVybiAncmVzb3VyY2VVc2VNZW51JztcbiAgfVxuXG4gIHNldFBlcm1pc3Npb25zKGNvbnRleHRNZW51T3BlbkV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gJChjb250ZXh0TWVudU9wZW5FdmVudC50YXJnZXQpO1xuICAgIGNvbnN0IHBlcm1pc3Npb25zID0gc3VwZXIuc2V0UGVybWlzc2lvbnMoY29udGV4dE1lbnVPcGVuRXZlbnQpO1xuICAgIGNvbnN0IHBhc3RlQWN0aW9uID0gdGhpcy5jb25maWd1cmF0aW9uLmFjdGlvbnMucGFzdGU7XG4gICAgLy8gSWYgdGhlIHBhc3RlIGxpbmsgZG9lcyBub3QgaGF2ZSB0aGUgZGlzYWJsZWQgY2xhc3MsIGFuZCB0aGVyZSBpcyBhIHBhc3RhYmxlIGV2ZW50IGZvdW5kIHRoZW4gZW5hYmxlIHRoZSBhY3Rpb25cbiAgICAvLyBvbmx5IG9mIHRoZSByaWdodCBwZXJtaXNzaW9ucyBhcHBseVxuICAgIGNvbnN0IHBhc3RlTWVudUl0ZW0gPSAkKGAjJHt0aGlzLm1lbnVJZGVudGlmaWVyKCl9IGxpW2RhdGEtbWVudS1pZD0ke3Bhc3RlQWN0aW9uLmlkfV1gKTtcbiAgICBjb25zdCBoYXNQYXN0ZVBlcm1pc3Npb24gPSBwZXJtaXNzaW9ucy5zb21lKHBlcm1TdHJpbmcgPT4gcGVybVN0cmluZyA9PT0gXCJwYXN0ZVwiKTtcbiAgICBpZiAoIWhhc1Bhc3RlUGVybWlzc2lvbiB8fCBwYXN0ZU1lbnVJdGVtLmhhc0NsYXNzKCdkaXNhYmxlZCcpIHx8ICQodGFyZ2V0KS5jbG9zZXN0KCcuZGV2LWV2ZW50LXBhc3NlbmdlcicpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcGFzdGVNZW51SXRlbS5hdHRyKCdpc0Rpc2FibGUnLCAndHJ1ZScpO1xuICAgICAgcGFzdGVNZW51SXRlbS5maW5kKCc+IGEnKS5hdHRyKCdpc0Rpc2FibGUnLCAndHJ1ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXN0ZU1lbnVJdGVtLnJlbW92ZUF0dHIoJ2lzRGlzYWJsZScpO1xuICAgICAgcGFzdGVNZW51SXRlbS5maW5kKCc+IGEnKS5yZW1vdmVBdHRyKCdpc0Rpc2FibGUnKTtcbiAgICB9XG4gIH1cblxuICBzZXRQYXN0ZUVuYWJsZW1lbnQoc2hvdWxkQmVFbmFibGVkKSB7XG4gICAgdGhpcy5jYW5QYXN0ZSA9IHNob3VsZEJlRW5hYmxlZDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./CommonScripts/eventinspector/eventinspector-resourcestab-contextmenu.js\n");

/***/ }),

/***/ "./CommonScripts/eventinspector/eventinspector-schedulestab-contextmenu.js":
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EventInspectorSchedulesTabContextMenu\": function() { return /* binding */ EventInspectorSchedulesTabContextMenu; }\n/* harmony export */ });\n/* harmony import */ var _eventinspector_contextmenu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./CommonScripts/eventinspector/eventinspector-contextmenu.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar EventInspectorSchedulesTabContextMenu = /*#__PURE__*/function (_EventInspectorContex) {\n  _inherits(EventInspectorSchedulesTabContextMenu, _EventInspectorContex);\n  var _super = _createSuper(EventInspectorSchedulesTabContextMenu);\n  function EventInspectorSchedulesTabContextMenu() {\n    _classCallCheck(this, EventInspectorSchedulesTabContextMenu);\n    return _super.apply(this, arguments);\n  }\n  _createClass(EventInspectorSchedulesTabContextMenu, [{\n    key: \"menuItems\",\n    value: function menuItems() {\n      return [this.actionItem('remove')];\n    }\n  }, {\n    key: \"menuIdentifier\",\n    value: function menuIdentifier() {\n      return 'schedulesMenu';\n    }\n  }]);\n  return EventInspectorSchedulesTabContextMenu;\n}(_eventinspector_contextmenu__WEBPACK_IMPORTED_MODULE_0__.EventInspectorContextMenu);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Db21tb25TY3JpcHRzL2V2ZW50aW5zcGVjdG9yL2V2ZW50aW5zcGVjdG9yLXNjaGVkdWxlc3RhYi1jb250ZXh0bWVudS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUmVhY3RDb21wb25lbnRzXy8uL0NvbW1vblNjcmlwdHMvZXZlbnRpbnNwZWN0b3IvZXZlbnRpbnNwZWN0b3Itc2NoZWR1bGVzdGFiLWNvbnRleHRtZW51LmpzP2U5ZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRJbnNwZWN0b3JDb250ZXh0TWVudSB9IGZyb20gJy4vZXZlbnRpbnNwZWN0b3ItY29udGV4dG1lbnUnO1xuXG5leHBvcnQgY2xhc3MgRXZlbnRJbnNwZWN0b3JTY2hlZHVsZXNUYWJDb250ZXh0TWVudSBleHRlbmRzIEV2ZW50SW5zcGVjdG9yQ29udGV4dE1lbnUge1xuXG4gIG1lbnVJdGVtcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgdGhpcy5hY3Rpb25JdGVtKCdyZW1vdmUnKVxuICAgIF07XG4gIH1cblxuICBtZW51SWRlbnRpZmllcigpIHtcbiAgICByZXR1cm4gJ3NjaGVkdWxlc01lbnUnO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./CommonScripts/eventinspector/eventinspector-schedulestab-contextmenu.js\n");

/***/ }),

/***/ "./CommonScripts/eventinspector/eventinspector-ui-control.js":
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"isAtScrollBottom\": function() { return /* binding */ isAtScrollBottom; },\n/* harmony export */   \"resourceGroupCheckboxClicked\": function() { return /* binding */ resourceGroupCheckboxClicked; },\n/* harmony export */   \"scrollElementVisibleIn\": function() { return /* binding */ scrollElementVisibleIn; },\n/* harmony export */   \"summaryEntryCheckboxClicked\": function() { return /* binding */ summaryEntryCheckboxClicked; },\n/* harmony export */   \"summaryEntryContextMenuClose\": function() { return /* binding */ summaryEntryContextMenuClose; },\n/* harmony export */   \"summaryEntryContextMenuOpen\": function() { return /* binding */ summaryEntryContextMenuOpen; },\n/* harmony export */   \"updateResourceGroupCheckboxForListItem\": function() { return /* binding */ updateResourceGroupCheckboxForListItem; }\n/* harmony export */ });\n// Detect if an element has been scrolled to the bottom\nfunction isAtScrollBottom(el) {\n  return el.scrollTop + el.clientHeight === el.scrollHeight;\n}\n\n// Scroll a container if an element inside the container is not visible to the user\nfunction scrollElementVisibleIn($element, $container) {\n  var elementTop = $element.offset().top;\n  var containerTop = $container.offset().top;\n  var containerBottom = containerTop + $container.height();\n  if (elementTop < containerTop || elementTop >= containerBottom) $container.scrollTop(elementTop - containerTop - 50);\n}\n\n// Script to set the correct state for the summary entry checkboxes\nfunction summaryEntryCheckboxClicked(checkbox) {\n  var nearestListItem = $(checkbox).closest('li');\n\n  // Toggle the checkbox on any children checkboxes\n  if ($(checkbox).prop('checked')) {\n    // Set the ui-selected class on the nearest li\n    nearestListItem.addClass('ui-selected');\n    // Recursively set the checkbox and ui-selected class on all children\n    nearestListItem.find('ul .dev-summary-checkbox').prop('checked', true);\n    nearestListItem.find('li').addClass('ui-selected');\n  } else {\n    // Remove the ui-selected class from the nearest li\n    $(checkbox).closest('li').removeClass('ui-selected');\n    // Recursively\n    $(checkbox).closest('li').find('ul .dev-summary-checkbox').prop('checked', false);\n    $(checkbox).closest('li').find('li').removeClass('ui-selected');\n  }\n\n  // See if we need to update the state of the resource group checkbox\n  updateResourceGroupCheckboxForListItem(nearestListItem);\n}\nfunction updateResourceGroupCheckboxForListItem(listItem) {\n  // See if we need to update the state of the resource group checkbox\n  var resourcesInGroup = listItem.closest('ul.inspector-list');\n\n  // We are checked so see if there are any children that are not selected\n  if (resourcesInGroup.children('li:not(.ui-selected)').length === 0) $(\"#\".concat(resourcesInGroup.attr('groupid'))).find('.dev-select-group').prop('checked', true);else $(\"#\".concat(resourcesInGroup.attr('groupid'))).find('.dev-select-group').prop('checked', false);\n}\n\n// Script to set the correct state of the resource group checkboxes\nfunction resourceGroupCheckboxClicked(checkbox) {\n  // Get the event row to which the checkbox belongs\n  var eventRow = $(checkbox).closest('.dev-event-passenger');\n  // Lookup the id of this group\n  var myID = $(checkbox).closest('.disclose-indented')[0].id;\n  // Search for the resources in this group\n  var groupResources = $(eventRow).find(\"ul[groupid=\".concat(myID, \"]\"));\n\n  // Find which elements should be toggled\n  var isToggled = $(checkbox).prop('checked');\n  var toToggle;\n  if (isToggled) toToggle = $(groupResources).children('li:not(.ui-selected)');else toToggle = $(groupResources).children('li.ui-selected');\n  toToggle.each(function () {\n    var checkbox = $(this).find('div.lined-list-row-select>input.checkbox');\n    if (isToggled) checkbox.prop('checked', isToggled);else checkbox.prop('checked', false);\n    summaryEntryCheckboxClicked(checkbox[0]);\n  });\n}\nfunction summaryEntryContextMenuOpen(target) {\n  // If the entry on which the menu was opened is not selected, then select it (potentially) recursively\n  // Indicate by means of a marker class that the entry was selected via the context menu\n\n  var contextMenuSelection = $(\"#\".concat(target));\n  if (!contextMenuSelection.closest('li').hasClass('ui-selected')) {\n    // Find all the list items in the entire hierarchy that do not have a selection state.\n    var liInHierarchyWithoutSelection = contextMenuSelection.closest('.inspector-list').find('li:not(.ui-selected)');\n\n    // Set the selection state of the context-menu focus\n    var checkbox = contextMenuSelection.closest('li').find('div.lined-list-row-select>input.dev-summary-checkbox').first();\n    checkbox.prop('checked', true);\n    summaryEntryCheckboxClicked(checkbox);\n\n    // Set a marker class on all of the listitems in the hierarchy that were not selected before but are now\n    liInHierarchyWithoutSelection.filter('.ui-selected').addClass('dev-selected-by-menu');\n  }\n}\nfunction summaryEntryContextMenuClose() {\n  // When closing the context menu, we need to remove the selection of all the elements in the tree that were set by opening the context menu\n  var setByMenu = $('.dev-selected-by-menu');\n  setByMenu.each(function (index, element) {\n    var li = $(element);\n    li.removeClass('ui-selected').removeClass('dev-selected-by-menu');\n    li.find('div.lined-list-row-select>input.dev-summary-checkbox').first().prop('checked', false);\n    updateResourceGroupCheckboxForListItem(li);\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Db21tb25TY3JpcHRzL2V2ZW50aW5zcGVjdG9yL2V2ZW50aW5zcGVjdG9yLXVpLWNvbnRyb2wuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBUUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQTtBQUNBO0FBSUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUmVhY3RDb21wb25lbnRzXy8uL0NvbW1vblNjcmlwdHMvZXZlbnRpbnNwZWN0b3IvZXZlbnRpbnNwZWN0b3ItdWktY29udHJvbC5qcz83MjQyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIERldGVjdCBpZiBhbiBlbGVtZW50IGhhcyBiZWVuIHNjcm9sbGVkIHRvIHRoZSBib3R0b21cbmV4cG9ydCBmdW5jdGlvbiBpc0F0U2Nyb2xsQm90dG9tKGVsKSB7XG4gIHJldHVybiBlbC5zY3JvbGxUb3AgKyBlbC5jbGllbnRIZWlnaHQgPT09IGVsLnNjcm9sbEhlaWdodDtcbn1cblxuLy8gU2Nyb2xsIGEgY29udGFpbmVyIGlmIGFuIGVsZW1lbnQgaW5zaWRlIHRoZSBjb250YWluZXIgaXMgbm90IHZpc2libGUgdG8gdGhlIHVzZXJcbmV4cG9ydCBmdW5jdGlvbiBzY3JvbGxFbGVtZW50VmlzaWJsZUluKCRlbGVtZW50LCAkY29udGFpbmVyKSB7XG4gIGNvbnN0IGVsZW1lbnRUb3AgPSAkZWxlbWVudC5vZmZzZXQoKS50b3A7XG4gIGNvbnN0IGNvbnRhaW5lclRvcCA9ICRjb250YWluZXIub2Zmc2V0KCkudG9wO1xuICBjb25zdCBjb250YWluZXJCb3R0b20gPSBjb250YWluZXJUb3AgKyAkY29udGFpbmVyLmhlaWdodCgpO1xuXG4gIGlmIChlbGVtZW50VG9wIDwgY29udGFpbmVyVG9wIHx8IGVsZW1lbnRUb3AgPj0gY29udGFpbmVyQm90dG9tKVxuICAgICRjb250YWluZXIuc2Nyb2xsVG9wKGVsZW1lbnRUb3AgLSBjb250YWluZXJUb3AgLSA1MCk7XG59XG5cbi8vIFNjcmlwdCB0byBzZXQgdGhlIGNvcnJlY3Qgc3RhdGUgZm9yIHRoZSBzdW1tYXJ5IGVudHJ5IGNoZWNrYm94ZXNcbmV4cG9ydCBmdW5jdGlvbiBzdW1tYXJ5RW50cnlDaGVja2JveENsaWNrZWQoY2hlY2tib3gpIHtcbiAgY29uc3QgbmVhcmVzdExpc3RJdGVtID0gJChjaGVja2JveCkuY2xvc2VzdCgnbGknKTtcblxuICAvLyBUb2dnbGUgdGhlIGNoZWNrYm94IG9uIGFueSBjaGlsZHJlbiBjaGVja2JveGVzXG4gIGlmICgkKGNoZWNrYm94KS5wcm9wKCdjaGVja2VkJykpIHtcbiAgICAvLyBTZXQgdGhlIHVpLXNlbGVjdGVkIGNsYXNzIG9uIHRoZSBuZWFyZXN0IGxpXG4gICAgbmVhcmVzdExpc3RJdGVtLmFkZENsYXNzKCd1aS1zZWxlY3RlZCcpO1xuICAgIC8vIFJlY3Vyc2l2ZWx5IHNldCB0aGUgY2hlY2tib3ggYW5kIHVpLXNlbGVjdGVkIGNsYXNzIG9uIGFsbCBjaGlsZHJlblxuICAgIG5lYXJlc3RMaXN0SXRlbS5maW5kKCd1bCAuZGV2LXN1bW1hcnktY2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgbmVhcmVzdExpc3RJdGVtLmZpbmQoJ2xpJykuYWRkQ2xhc3MoJ3VpLXNlbGVjdGVkJyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gUmVtb3ZlIHRoZSB1aS1zZWxlY3RlZCBjbGFzcyBmcm9tIHRoZSBuZWFyZXN0IGxpXG4gICAgJChjaGVja2JveCkuY2xvc2VzdCgnbGknKS5yZW1vdmVDbGFzcygndWktc2VsZWN0ZWQnKTtcbiAgICAvLyBSZWN1cnNpdmVseVxuICAgICQoY2hlY2tib3gpLmNsb3Nlc3QoJ2xpJykuZmluZCgndWwgLmRldi1zdW1tYXJ5LWNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAkKGNoZWNrYm94KS5jbG9zZXN0KCdsaScpLmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoJ3VpLXNlbGVjdGVkJyk7XG4gIH1cblxuICAvLyBTZWUgaWYgd2UgbmVlZCB0byB1cGRhdGUgdGhlIHN0YXRlIG9mIHRoZSByZXNvdXJjZSBncm91cCBjaGVja2JveFxuICB1cGRhdGVSZXNvdXJjZUdyb3VwQ2hlY2tib3hGb3JMaXN0SXRlbShuZWFyZXN0TGlzdEl0ZW0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUmVzb3VyY2VHcm91cENoZWNrYm94Rm9yTGlzdEl0ZW0obGlzdEl0ZW0pIHtcbiAgLy8gU2VlIGlmIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSBzdGF0ZSBvZiB0aGUgcmVzb3VyY2UgZ3JvdXAgY2hlY2tib3hcbiAgY29uc3QgcmVzb3VyY2VzSW5Hcm91cCA9IGxpc3RJdGVtLmNsb3Nlc3QoJ3VsLmluc3BlY3Rvci1saXN0Jyk7XG5cbiAgLy8gV2UgYXJlIGNoZWNrZWQgc28gc2VlIGlmIHRoZXJlIGFyZSBhbnkgY2hpbGRyZW4gdGhhdCBhcmUgbm90IHNlbGVjdGVkXG4gIGlmIChyZXNvdXJjZXNJbkdyb3VwLmNoaWxkcmVuKCdsaTpub3QoLnVpLXNlbGVjdGVkKScpLmxlbmd0aCA9PT0gMClcbiAgICAkKGAjJHtyZXNvdXJjZXNJbkdyb3VwLmF0dHIoJ2dyb3VwaWQnKX1gKVxuICAgICAgLmZpbmQoJy5kZXYtc2VsZWN0LWdyb3VwJylcbiAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gIGVsc2VcbiAgICAkKGAjJHtyZXNvdXJjZXNJbkdyb3VwLmF0dHIoJ2dyb3VwaWQnKX1gKVxuICAgICAgLmZpbmQoJy5kZXYtc2VsZWN0LWdyb3VwJylcbiAgICAgIC5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xufVxuXG4vLyBTY3JpcHQgdG8gc2V0IHRoZSBjb3JyZWN0IHN0YXRlIG9mIHRoZSByZXNvdXJjZSBncm91cCBjaGVja2JveGVzXG5leHBvcnQgZnVuY3Rpb24gcmVzb3VyY2VHcm91cENoZWNrYm94Q2xpY2tlZChjaGVja2JveCkge1xuICAvLyBHZXQgdGhlIGV2ZW50IHJvdyB0byB3aGljaCB0aGUgY2hlY2tib3ggYmVsb25nc1xuICBjb25zdCBldmVudFJvdyA9ICQoY2hlY2tib3gpLmNsb3Nlc3QoJy5kZXYtZXZlbnQtcGFzc2VuZ2VyJyk7XG4gIC8vIExvb2t1cCB0aGUgaWQgb2YgdGhpcyBncm91cFxuICBjb25zdCBteUlEID0gJChjaGVja2JveCkuY2xvc2VzdCgnLmRpc2Nsb3NlLWluZGVudGVkJylbMF0uaWQ7XG4gIC8vIFNlYXJjaCBmb3IgdGhlIHJlc291cmNlcyBpbiB0aGlzIGdyb3VwXG4gIGNvbnN0IGdyb3VwUmVzb3VyY2VzID0gJChldmVudFJvdykuZmluZChgdWxbZ3JvdXBpZD0ke215SUR9XWApO1xuXG4gIC8vIEZpbmQgd2hpY2ggZWxlbWVudHMgc2hvdWxkIGJlIHRvZ2dsZWRcbiAgY29uc3QgaXNUb2dnbGVkID0gJChjaGVja2JveCkucHJvcCgnY2hlY2tlZCcpO1xuICBsZXQgdG9Ub2dnbGU7XG4gIGlmIChpc1RvZ2dsZWQpIHRvVG9nZ2xlID0gJChncm91cFJlc291cmNlcykuY2hpbGRyZW4oJ2xpOm5vdCgudWktc2VsZWN0ZWQpJyk7XG4gIGVsc2UgdG9Ub2dnbGUgPSAkKGdyb3VwUmVzb3VyY2VzKS5jaGlsZHJlbignbGkudWktc2VsZWN0ZWQnKTtcbiAgdG9Ub2dnbGUuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgY2hlY2tib3ggPSAkKHRoaXMpLmZpbmQoJ2Rpdi5saW5lZC1saXN0LXJvdy1zZWxlY3Q+aW5wdXQuY2hlY2tib3gnKTtcbiAgICBpZiAoaXNUb2dnbGVkKSBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgaXNUb2dnbGVkKTtcbiAgICBlbHNlIGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgc3VtbWFyeUVudHJ5Q2hlY2tib3hDbGlja2VkKGNoZWNrYm94WzBdKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdW1tYXJ5RW50cnlDb250ZXh0TWVudU9wZW4odGFyZ2V0KSB7XG4gIC8vIElmIHRoZSBlbnRyeSBvbiB3aGljaCB0aGUgbWVudSB3YXMgb3BlbmVkIGlzIG5vdCBzZWxlY3RlZCwgdGhlbiBzZWxlY3QgaXQgKHBvdGVudGlhbGx5KSByZWN1cnNpdmVseVxuICAvLyBJbmRpY2F0ZSBieSBtZWFucyBvZiBhIG1hcmtlciBjbGFzcyB0aGF0IHRoZSBlbnRyeSB3YXMgc2VsZWN0ZWQgdmlhIHRoZSBjb250ZXh0IG1lbnVcblxuICBjb25zdCBjb250ZXh0TWVudVNlbGVjdGlvbiA9ICQoYCMke3RhcmdldH1gKTtcbiAgaWYgKCFjb250ZXh0TWVudVNlbGVjdGlvbi5jbG9zZXN0KCdsaScpLmhhc0NsYXNzKCd1aS1zZWxlY3RlZCcpKSB7XG4gICAgLy8gRmluZCBhbGwgdGhlIGxpc3QgaXRlbXMgaW4gdGhlIGVudGlyZSBoaWVyYXJjaHkgdGhhdCBkbyBub3QgaGF2ZSBhIHNlbGVjdGlvbiBzdGF0ZS5cbiAgICBjb25zdCBsaUluSGllcmFyY2h5V2l0aG91dFNlbGVjdGlvbiA9IGNvbnRleHRNZW51U2VsZWN0aW9uXG4gICAgICAuY2xvc2VzdCgnLmluc3BlY3Rvci1saXN0JylcbiAgICAgIC5maW5kKCdsaTpub3QoLnVpLXNlbGVjdGVkKScpO1xuXG4gICAgLy8gU2V0IHRoZSBzZWxlY3Rpb24gc3RhdGUgb2YgdGhlIGNvbnRleHQtbWVudSBmb2N1c1xuICAgIGNvbnN0IGNoZWNrYm94ID0gY29udGV4dE1lbnVTZWxlY3Rpb25cbiAgICAgIC5jbG9zZXN0KCdsaScpXG4gICAgICAuZmluZCgnZGl2LmxpbmVkLWxpc3Qtcm93LXNlbGVjdD5pbnB1dC5kZXYtc3VtbWFyeS1jaGVja2JveCcpXG4gICAgICAuZmlyc3QoKTtcbiAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgc3VtbWFyeUVudHJ5Q2hlY2tib3hDbGlja2VkKGNoZWNrYm94KTtcblxuICAgIC8vIFNldCBhIG1hcmtlciBjbGFzcyBvbiBhbGwgb2YgdGhlIGxpc3RpdGVtcyBpbiB0aGUgaGllcmFyY2h5IHRoYXQgd2VyZSBub3Qgc2VsZWN0ZWQgYmVmb3JlIGJ1dCBhcmUgbm93XG4gICAgbGlJbkhpZXJhcmNoeVdpdGhvdXRTZWxlY3Rpb24uZmlsdGVyKCcudWktc2VsZWN0ZWQnKS5hZGRDbGFzcygnZGV2LXNlbGVjdGVkLWJ5LW1lbnUnKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3VtbWFyeUVudHJ5Q29udGV4dE1lbnVDbG9zZSgpIHtcbiAgLy8gV2hlbiBjbG9zaW5nIHRoZSBjb250ZXh0IG1lbnUsIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBzZWxlY3Rpb24gb2YgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgdHJlZSB0aGF0IHdlcmUgc2V0IGJ5IG9wZW5pbmcgdGhlIGNvbnRleHQgbWVudVxuICBjb25zdCBzZXRCeU1lbnUgPSAkKCcuZGV2LXNlbGVjdGVkLWJ5LW1lbnUnKTtcbiAgc2V0QnlNZW51LmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGVsZW1lbnQpO1xuICAgIGxpLnJlbW92ZUNsYXNzKCd1aS1zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdkZXYtc2VsZWN0ZWQtYnktbWVudScpO1xuICAgIGxpLmZpbmQoJ2Rpdi5saW5lZC1saXN0LXJvdy1zZWxlY3Q+aW5wdXQuZGV2LXN1bW1hcnktY2hlY2tib3gnKS5maXJzdCgpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgdXBkYXRlUmVzb3VyY2VHcm91cENoZWNrYm94Rm9yTGlzdEl0ZW0obGkpO1xuICB9KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./CommonScripts/eventinspector/eventinspector-ui-control.js\n");

/***/ }),

/***/ "./CommonScripts/sharedscripts/sharedscripts-contextmenu.js":
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SharedscriptsContextmenu\": function() { return /* binding */ SharedscriptsContextmenu; }\n/* harmony export */ });\n/* harmony import */ var _sentry_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/@sentry/hub/esm/exports.js\");\n/* harmony import */ var _sharedscripts_sentry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./CommonScripts/sharedscripts/sharedscripts-sentry.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n/* eslint-disable camelcase, func-names */\n// Client-side support for dynamic context menus.\n//\n// The trigger to open them is something which is left to the client to set up.\n// All the client needs to do is tell this module the page coordinates of where\n// the menu should appear. E.g.:\n//\n//   $('#maintable').on('contextmenu', 'td', function(e) {\n//       menu.show(e.pageX, e.pageY)\n//   })\n//\n// The menu will be created with its top-left corner at exactly that position,\n// unless it would not fit within the bounds of the viewport. If that is the\n// case it will get shifted left and up as much as is needed to make it fit.\n//\n//\n// Creating the menu is done by calling $context.create(...) and passing it a\n// javascript array which defines the menu structure. E.g.:\n//\n//   menu = $context.create([\n//     item_1,\n//     item_2,\n//     ...\n//     item_n,\n//   ])\n//\n// The menus get attached to the DOM, so it is best to only create them once.\n// When a menu closes they do not get cleaned up. Cleanup should be done\n// explicitly, but there is no supporting function yet to do so. (TODO!)\n//\n//\n// Each menu item is a javascript object which defines some basic data. At the\n// heart of everything is its type, which can be anything supported by the\n// 'formatters' list you'll find further down in the code. At the time of\n// writing these are: item, separator, submenu, input and checkbox. The type gets\n// specified via a 'a' or 'an' field. E.g.:\n//\n//   item_1 = { an: 'item', ... }\n//   item_2 = { a: 'separator', ... }\n//   item_3 = { a: 'submenu', ... }\n//\n// If no type is specified then it is assumed to be 'item'. This should be the\n// common case. So 'item_1' could have been reduced to:\n//\n//   item_1 = { ... }\n//\n// All menu items can have an optional 'id' field. This allows referring to,\n// and manipulating, a specific menu item after the menu has been built. The\n// added effect is that a data attribute 'data-menu-id' is added to the DOM\n// element, which helps grabbing specific menu items in automated tests.\n//\n// All other fields which are required depend on the type of the menu item. For\n// the default type 'item' these are:\n//   - text: which sets the menu item's label.\n//   - fn: which defines a callback function to be triggered when the menu item\n//     gets activated. If you don't specify a callback and a menu item gets\n//     activated this library will fire a 'click-menu-item' event, which can be\n//     handled by JQuery event handlers. E.g.:\n//\n//     $('body').on('click-menu-item', function(e, menu_item_definition) {\n//       ...\n//     })\n//\n// Item visibility and enablement:\n// All menu items have an optional 'disableif' and 'hideif' field. They accept\n// a function parameter and can be used to respectively disable or hide the menu item.\n//\n// Submenus also have a label which you can define via the 'text' field. In\n// addition it accepts a 'with' field which holds the definition for the\n// submenu. This again conforms to the definition of any menu (i.e. a list of\n// menu items). E.g.:\n//\n//   submenu = { a: 'submenu', text: 'Submenu', with: [\n//     item_1,\n//     item_2,\n//     ...\n//     item_n\n//   ]}\n//\n// Aside from that submenus can also be created dynamically. To do that you\n// should not pass an array as the value of the 'with' field but pass a\n// function instead. This function will get triggered when the submenu should\n// become visible, and it should return the definition of the submenu as usual.\n// So the above example could also have been written as:\n//\n//   submenu = { a: 'submenu', text: 'Submenu', with: function() {\n//     return [\n//       item_1,\n//       item_2,\n//       ...\n//       item_n\n//     ]\n//   }}\n//\n// Here is a more complete example of a menu definition, which also shows\n// fields for other menu item types:\n//\n//   menu = $context.create([\n//     { text: 'New Event', fn: function() { console.log('NEW EVENT')} },\n//     { text: 'Set as Unavailable', fn: logit },\n//\n//     { a: 'separator' },\n//\n//     { a: 'submenu', text: 'Assign Status', with: [\n//       { text: 'No Status' },\n//           { text: 'Option Request' },\n//           { text: 'Option' },\n//           { text: 'Confirmed Option' },\n//           { text: 'Planned' },\n//           { text: 'Locked' },\n//           { text: 'Cancelled' }\n//      ]},\n//      { a: 'submenu', text: 'Assign Role', with: dynamic_items_fn },\n//\n//      { a: 'separator' },\n//\n//      { text: 'Cut', disableif=function(){ return user can_delete }},\n//      { text: 'Copy' },\n//      { text: 'Paste' },\n//\n//      { a: 'separator' },\n//\n//      { a: 'submenu', text: 'Add to Group', with: [ { an: 'search', text: 'Search contact...', source: source_fn, select: select_fn } ],\n//\n//      { an: 'input' },\n//      { a: 'checkbox', text: 'Check ?' },\n//   ])\n//\n//\n// In addition, the opening and closing of menus and submenus fires events\n// which can be handles by JQuery event handlers. E.g.:\n//\n//   $('body').on('closed-menu', function(e) {\n//      ...\n//   })\n//\n// The events which can be watched for are:\n//   - opening-menu\n//   - closed-menu\n//   - opening-sub-menu\n//   - closed-sub-menu\n\n\n\nvar SharedscriptsContextmenu = /*#__PURE__*/function () {\n  function SharedscriptsContextmenu(items, options, root_menu) {\n    _classCallCheck(this, SharedscriptsContextmenu);\n    this.menu = null;\n    this.root_menu = root_menu || this;\n    this.options = options || {};\n    this.identified = {};\n    this.active_submenu_item = null;\n    this.active_submenu = null;\n    this.is_shown = false;\n    this.x = null;\n    this.y = null;\n    this.isMac = navigator.platform.match(/mac/i) !== null && navigator.platform.match(/mac/i).length > 0;\n    this.clones = [];\n    this.cached_submenu_items = {};\n    this.timer = null;\n    this.setup_container();\n    this.setup_items(items);\n    this.setup_interactions();\n  }\n  _createClass(SharedscriptsContextmenu, [{\n    key: \"setup_container\",\n    value: function setup_container() {\n      this.menu = $('<ul>');\n      if (this.root_menu === this) {\n        this.menu.addClass('menu');\n      } else {\n        this.menu.addClass('submenu');\n        if (this.options.subMenuCssClasses) {\n          this.options.subMenuCssClasses.forEach(function (cssClass) {\n            this.menu.addClass(cssClass);\n          }.bind(this));\n        }\n      }\n      if (this.options.containerCssClasses) {\n        this.menu.removeClass('menu');\n        this.options.containerCssClasses.forEach(function (cssClass) {\n          this.menu.addClass(cssClass);\n        }.bind(this));\n      }\n      if (this.options.id) this.menu.attr('id', this.options.id);\n      if (this.options.closeOnMouseOut) {\n        var self = this;\n        this.menu.on('mouseleave', function () {\n          this.timer = setTimeout(function () {\n            self.close();\n            if (self.root_menu === self) {\n              self.options.onCloseMouseOut && self.options.onCloseMouseOut();\n            }\n          }, self.options.closeAfter || 500);\n        });\n        /* If a mouseover happens while the timer on mouseleave is still counting,\n           cancel the close action.  */\n        this.menu.on('mouseover', function () {\n          if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = null;\n          }\n        });\n      }\n    }\n  }, {\n    key: \"setup_items\",\n    value: function setup_items(items) {\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        var element = $('<li>').addClass('dev-menu-item');\n        if (item.class) element.addClass(item.class);\n        element.data('dev-menu-item', item);\n        format(item, element, this);\n        if (item.hideif !== undefined) element.data('hideif', item.hideif);\n        if (item.disableif !== undefined) {\n          element.data('disableif', item.disableif);\n        }\n        if (item.showif !== undefined) {\n          element.data('showif', item.showif);\n        }\n        if (typeof item.text === 'function') element.data('text_fn', item.text);\n        if (item.htmlAttributes) {\n          element.data('htmlAttributes', item.htmlAttributes);\n        }\n        if (item.id) {\n          element.attr('data-menu-id', item.id);\n          this.identified[item.id] = {\n            item: item,\n            element: element\n          };\n        }\n        if (item.focus) element.attr('data-focus', true);\n        this.menu.append(element);\n      }\n    }\n  }, {\n    key: \"setup_interactions\",\n    value: function setup_interactions() {\n      var context = this;\n\n      // Prevent clicks from seeping through the context menu, which might\n      // otherwise close the menu prematurely.\n      // eslint-disable-next-line func-names\n      this.menu.on('click', function (e) {\n        e.stopPropagation();\n      });\n\n      // Same for input fields shown in the menu. Interacting with them should\n      // not close the menu.\n      // eslint-disable-next-line func-names\n      this.menu.on('click', 'input', function (e) {\n        e.stopPropagation();\n      });\n\n      // Clicking on a menu item triggers an action event.\n      this.menu.on('click', '.dev-menu-item:not(.separator):not(.disabled)',\n      // eslint-disable-next-line func-names\n      function (e) {\n        e.stopPropagation();\n        var definition = $(this).data('dev-menu-item');\n        logAction(\"Clicked on \".concat(definition.text));\n        if (definition.fn) {\n          definition.fn(e);\n          if ((definition.a || definition.an) !== 'submenu') {\n            context.root_menu.close();\n          }\n        } else {\n          context.menu.trigger('click-menu-item', definition);\n        }\n      });\n\n      // Submenu interaction.\n      // eslint-disable-next-line func-names\n      this.menu.on('mouseover', '.dev-menu-item', function (e) {\n        if ($(this).hasClass('disabled')) return;\n        if (context.active_submenu_item) context.active_submenu_item.removeClass('active');\n        if ($(this).data('dev-menu-item').a !== 'submenu' && $(this).data('dev-menu-item').an !== 'submenu') {\n          context.active_submenu_item = null;\n        } else {\n          context.active_submenu_item = $(this);\n          context.active_submenu_item.addClass('active');\n        }\n        toggle_submenu_as_needed();\n      });\n\n      // Show/Hide submenus as needed.\n      // This gets debounced to prevent visual artefacts.\n      var toggle_submenu_as_needed = debounce(function () {\n        if (context.active_submenu && context.active_submenu.is_shown && context.active_submenu_item && context.active_submenu === context.active_submenu_item.data('submenu')) {\n          return;\n        }\n        if (context.active_submenu) context.active_submenu.close();\n        if (context.active_submenu_item) {\n          context.active_submenu = context.active_submenu_item.data('submenu');\n          var definition = context.active_submenu_item.data('dev-menu-item');\n          var items = definition.with;\n          var createSubMenu = function createSubMenu(items, options, context) {\n            options.id = 'submenu';\n            options.for = definition.text;\n            context.active_submenu = new SharedscriptsContextmenu(items, options, context);\n            context.active_submenu_item.data('submenu', context.active_submenu);\n          };\n          var contextHasSubmenuForDefinition = function contextHasSubmenuForDefinition(definition) {\n            return context.active_submenu && context.active_submenu.options.for === definition.text;\n          };\n          logAction(\"Opening submenu for \".concat(definition.text));\n\n          // Async function\n          if (typeof items === 'function') {\n            var cached_items = context.root_menu.cached_submenu_items[definition.text];\n            if (definition.rebuildSubmenu || !cached_items) {\n              items(true, function (res) {\n                /* If the active_submenu_item is no longer set, the user has selected another menu item.\n                   Discard the results of the async call and do not show the submenu */\n                if (context.active_submenu_item) {\n                  createSubMenu(res, context.options, context);\n                  context.active_submenu.show_for(context.active_submenu_item);\n                }\n                context.root_menu.cached_submenu_items[definition.text] = res;\n              });\n            } else {\n              createSubMenu(cached_items, context.options, context);\n              context.active_submenu.show_for(context.active_submenu_item);\n            }\n          } else {\n            /* Recreate the menu if explicitly configured or if the current submenu is not set or for another definition */\n            if (!contextHasSubmenuForDefinition(definition) || definition.rebuildSubmenu) {\n              createSubMenu(items, context.options, context);\n            }\n            context.active_submenu.show_for(context.active_submenu_item);\n          }\n        }\n      }, 250);\n\n      // Clicking outside the context menu must hide it.\n      $('body').on('click', function (e) {\n        if (e.ctrlKey && context.isMac) return;\n        context.close();\n      });\n    }\n  }, {\n    key: \"show\",\n    value:\n    // Show the menu as near as possible to the requested coordinates, but\n    // making sure that the entire menu stays visible...\n    function show(x, y) {\n      var max_x = $(document).width();\n      var max_y = $(document).height();\n      var width = this.menu.width();\n      var height = this.menu.height();\n      x = Math.max(0, Math.min(x, max_x - width));\n      y = Math.max(0, Math.min(y, max_y - height));\n      this.show_at(x, y);\n    }\n  }, {\n    key: \"show_for\",\n    value: function show_for(menu_item) {\n      if (this.is_shown) return;\n      this.prepare_show();\n      this.menu.hide();\n      $(menu_item).append(this.menu);\n      this.menu.css('visibility', 'visible').hide().fadeIn(100);\n      if (this.menu.width() + menu_item.offset().left + menu_item.width() > document.documentElement.clientWidth + $(window).scrollLeft()) {\n        var left = this.menu.width() > menu_item.width() ? menu_item.width() - this.menu.width() : 5;\n        this.menu.css('left', \"\".concat(left, \"px\")).css('position', 'absolute');\n      }\n      this.is_shown = true;\n      this.after_show();\n    }\n  }, {\n    key: \"show_at\",\n    value: function show_at(x, y) {\n      if (this.is_shown && this.x === x && this.y === y) return;\n\n      // Only append the root menu to the body, submenus are appended to their menu-item element\n      if (this.root_menu === this) $('body').append(this.menu);\n      this.prepare_show();\n      var top = y;\n      if ($('body').height() + $(document).scrollTop() - y < this.menu.height()) {\n        top -= this.menu.height() - ($('body').height() + $(document).scrollTop() - y) + 5;\n      }\n      this.menu.css('top', \"\".concat(top, \"px\")).css('left', \"\".concat(x, \"px\")).css('visibility', 'visible').css('z-index', 999999).hide().fadeIn(100);\n      this.is_shown = true;\n      this.after_show();\n    }\n  }, {\n    key: \"prepare_show\",\n    value: function prepare_show() {\n      if (this.active_submenu_item) {\n        this.active_submenu_item.removeClass('active');\n        this.active_submenu_item = null;\n      }\n      if (this.active_submenu) {\n        this.active_submenu.close();\n        this.active_submenu = null;\n      }\n      this.menu.find('li').each(function () {\n        if ($(this).data('hideif') && $(this).data('hideif')()) {\n          $(this).hide();\n        } else {\n          $(this).show();\n        }\n      }).each(function () {\n        if ($(this).data('disableif')) {\n          var disableif = $(this).data('disableif');\n          if (typeof disableif === 'boolean' && disableif || $(this).data('disableif')()) {\n            $(this).addClass('disabled');\n            $(this).find('> a').addClass('disabled');\n          } else {\n            $(this).removeClass('disabled');\n            $(this).find('> a').removeClass('disabled');\n          }\n        }\n      }).each(function () {\n        if ($(this).data('showif')) {\n          if (!$(this).data('showif')()) {\n            $(this).css('display', 'none');\n          } else {\n            $(this).css('display', 'block');\n          }\n        }\n      }).each(function () {\n        if ($(this).data('htmlAttributes')) {\n          var attributes = $(this).data('htmlAttributes');\n          var element = $(this);\n          Object.keys(attributes).forEach(function (key) {\n            $(element).data(key, attributes[key]);\n          });\n        }\n      }).each(function () {\n        if ($(this).data('text_fn')) {\n          $(this).find('a').html($(this).data('text_fn')());\n        }\n      });\n      if (this.root_menu === this) {\n        this.menu.trigger('opening-menu');\n      } else {\n        $(this.menu).trigger('opening-sub-menu');\n      }\n    }\n  }, {\n    key: \"after_show\",\n    value: function after_show() {\n      this.menu.find('li').each(function () {\n        if ($(this).data('focus')) {\n          $(this).find('input').focus();\n        }\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (!this.is_shown) return;\n      if (this.active_submenu_item) {\n        this.active_submenu_item.removeClass('active');\n        if (this.active_submenu_item.data('submenu') !== undefined) {\n          this.active_submenu_item.data('submenu').close();\n        }\n      }\n\n      /* Add the clone element back on the page */\n      this.clones.forEach(function (cloneElement) {\n        cloneElement.appendTo(cloneElement.data('parent'));\n      });\n      /* Reset cached submenu items */\n      this.cached_submenu_items = {};\n      this.is_shown = false;\n      this.menu.css('visibility', 'hidden').fadeOut(100);\n      if (this.root_menu === this) {\n        this.menu.trigger('closed-menu');\n      } else {\n        this.menu.trigger('closed-sub-menu');\n      }\n      this.menu.detach();\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.menu.remove();\n    }\n  }, {\n    key: \"enable\",\n    value: function enable(id) {\n      if (this.identified[id]) {\n        this.identified[id].element.removeClass('disabled');\n        this.identified[id].element.find('> a').removeClass('disabled');\n        if (typeof this.identified[id].element.data('disableif') === 'boolean') {\n          this.identified[id].element.data('disableif', false);\n        }\n      }\n    }\n  }, {\n    key: \"enable_all\",\n    value: function enable_all() {\n      var ids = Object.keys(this.identified);\n      for (var i = 0; i < ids.length; i++) {\n        this.enable(ids[i]);\n      }\n    }\n  }, {\n    key: \"disable\",\n    value: function disable(id) {\n      if (this.identified[id]) {\n        this.identified[id].element.addClass('disabled');\n        if (typeof this.identified[id].element.data('disableif') === 'boolean') {\n          this.identified[id].element.data('disableif', true);\n        }\n      }\n    }\n  }, {\n    key: \"disable_all\",\n    value: function disable_all() {\n      var ids = Object.keys(this.identified);\n      for (var i = 0; i < ids.length; i++) {\n        this.disable(ids[i]);\n      }\n    }\n  }, {\n    key: \"set_text\",\n    value: function set_text(id, text) {\n      var idd = this.identified[id];\n      if (idd.item.text) {\n        idd.item.text = text;\n        idd.element.find('a.menu-action').text(text);\n      }\n    }\n  }, {\n    key: \"get_htmlattribute\",\n    value: function get_htmlattribute(id, key) {\n      if (this.identified[id]) {\n        if (this.identified[id].item.htmlAttributes) {\n          return this.identified[id].item.htmlAttributes[key];\n        }\n      }\n      return null;\n    }\n  }, {\n    key: \"set_htmlattribute\",\n    value: function set_htmlattribute(id, key, value) {\n      var idd = this.identified[id];\n      if (idd) {\n        var htmlAttributes = idd.item.htmlAttributes || {};\n        htmlAttributes[key] = value;\n        idd.item.htmlAttributes = htmlAttributes;\n        idd.element.data(key, value);\n      }\n    }\n  }]);\n  return SharedscriptsContextmenu;\n}();\n\n// --------------------------------------------------------------------------\n\nvar formatters = {\n  separator: function separator(definition, element, menucontext) {\n    element.addClass('separator');\n  },\n  item: function item(definition, element, menucontext) {\n    var text = typeof definition.text === 'function' ? definition.text : definition.text.replace(/\\s/g, '&nbsp;'); // Preserve whitespaces in the text\n    if (definition.cssClass) {\n      element.addClass(definition.cssClass);\n    }\n    $('<a class=\"menu-action\" href=\"javascript:{}\">').appendTo(element).html(text);\n    if (definition.deleteAction) {\n      $('<a class=\"destroyer\" href=\"javascript:{}\">').on('click', function (e) {\n        e.stopPropagation();\n        definition.deleteAction(e);\n        return false;\n      }).appendTo(element).html('delete');\n    }\n  },\n  submenu: function submenu(definition, element, menucontext) {\n    $('<a href=\"javascript:{}\">').html(definition.text).appendTo(element.addClass('branch'));\n  },\n  input: function input(definition, element, menucontext) {\n    var input = $('<input>').attr('type', 'text').attr('placeholder', definition.text);\n    if (definition.focusOnOpen) {\n      menucontext.menu.on('opening-sub-menu', function () {\n        setTimeout(function () {\n          input.focus();\n        }, 150);\n      });\n    }\n    if (definition.onEnter) {\n      input.on('keypress', function (e) {\n        if (e.key === 'Enter') {\n          var inputValue = input.val();\n          definition.onEnter(inputValue);\n          input.val('');\n        }\n      });\n    }\n    element.append(input);\n  },\n  search: function search(definition, element, menucontext) {\n    var updateInputMarginFunction = function updateInputMarginFunction() {\n      setTimeout(function () {\n        var width = $('.input-filter', element).outerWidth() + 10;\n        $(searchfield).css('padding-right', \"\".concat(width.toString(), \"px\"));\n      }, 0);\n    };\n\n    // JQ-UI Autocomplete automatically appends the suggestion menu to a parent marked with .ui-front\n    var container = $('<div>').addClass('ui-front menu__autocomplete-result');\n    var searchfield = $('<input>').attr('type', 'text').attr('placeholder', definition.text);\n    if (definition.onNew) {\n      searchfield.on('keyup', function (event) {\n        if (event.key === 'Enter') {\n          event.preventDefault();\n          definition.onNew(searchfield.val());\n        }\n      });\n    }\n    container.append(searchfield);\n    if (definition.withFilter) {\n      var filter = $('<span>').addClass('submenu-filter input-filter');\n      filter.attr('title', definition.filterTooltipFunction());\n      filter.html(definition.filterLabelFunction());\n      filter.on('click', function (clickEvent) {\n        clickEvent.preventDefault();\n        definition.filterToggle(function () {\n          filter.attr('title', definition.filterTooltipFunction());\n          filter.html(definition.filterLabelFunction());\n          updateInputMarginFunction();\n        });\n      });\n      container.append(filter);\n    }\n    menucontext.menu.on('opening-sub-menu', function () {\n      searchfield.get(0).value = '';\n      updateInputMarginFunction();\n      setTimeout(function () {\n        searchfield.focus();\n      }, 150);\n    });\n    element.append(container);\n\n    // TODO: move autocomplete implementation to separate module for sharing\n    searchfield.npPresetAutocomplete({\n      autoFocus: true,\n      minLength: definition.minLength,\n      messages: {\n        noResults: function noResults() {},\n        results: function results() {}\n      },\n      source: definition.source,\n      create: function create() {\n        if (definition.withPresets) {\n          searchfield.on('focus', function () {\n            searchfield.npPresetAutocomplete('search', '');\n          });\n        }\n      },\n      select: function select(event, ui) {\n        event.stopPropagation();\n        event.preventDefault();\n        definition.select(event, ui);\n        menucontext.root_menu.close();\n      },\n      open: function open(event, ui) {\n        $('.ui-autocomplete.ui-menu').css('left', 0).css('top', 0).css('width', 'auto');\n      }\n    });\n  },\n  searchresults: function searchresults(definition, element, menucontext) {\n    element.append($('<div>').attr('id', definition.id));\n  },\n  checkbox: function checkbox(definition, element, menucontext) {\n    var checkbox = $('<input>').attr('type', 'checkbox');\n    element.append(checkbox).append(definition.text);\n  },\n  hoverable: function hoverable(definition, element, menucontext) {\n    var text = typeof definition.text === 'function' ? definition.text : definition.text.replace(/\\s/g, '&nbsp;'); // Preserve whitespaces in the text\n    $('<a class=\"menu-action\" href=\"javascript:{}\">').appendTo(element).on('mouseover', definition.mouseover || function (e) {}).on('mouseout', definition.mouseout || function (e) {}).html(text);\n  },\n  clone: function clone(definition, element, menucontext) {\n    var original = $(\"#\".concat(definition.cloneId));\n    var clone = original.clone(true);\n    /* Remove the original element, keeping it in the clones array.\n       Necessary such that no two elements with the same id are on the page\n       and callback functions operate on the correct element */\n    menucontext.clones.push(original);\n    original.data('parent', original.parent());\n    original.detach();\n    clone.show();\n    clone.appendTo(element);\n  }\n};\nfunction format(definition, element, menucontext) {\n  var type = definition.a || definition.an || 'item';\n  formatters[type](definition, element, menucontext);\n}\n\n// --------------------------------------------------------------------------\n\n// http://davidwalsh.name/javascript-debounce-function\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nfunction debounce(func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this,\n      args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n\n// Error logging\nfunction logAction(message) {\n  if ((0,_sharedscripts_sentry__WEBPACK_IMPORTED_MODULE_0__.isSentryInitialized)()) {\n    _sentry_browser__WEBPACK_IMPORTED_MODULE_1__.addBreadcrumb({\n      category: 'contextmenu',\n      message: message,\n      level: 'info'\n    });\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Db21tb25TY3JpcHRzL3NoYXJlZHNjcmlwdHMvc2hhcmVkc2NyaXB0cy1jb250ZXh0bWVudS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBUUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBR0E7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SZWFjdENvbXBvbmVudHNfLy4vQ29tbW9uU2NyaXB0cy9zaGFyZWRzY3JpcHRzL3NoYXJlZHNjcmlwdHMtY29udGV4dG1lbnUuanM/MWM1NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UsIGZ1bmMtbmFtZXMgKi9cbi8vIENsaWVudC1zaWRlIHN1cHBvcnQgZm9yIGR5bmFtaWMgY29udGV4dCBtZW51cy5cbi8vXG4vLyBUaGUgdHJpZ2dlciB0byBvcGVuIHRoZW0gaXMgc29tZXRoaW5nIHdoaWNoIGlzIGxlZnQgdG8gdGhlIGNsaWVudCB0byBzZXQgdXAuXG4vLyBBbGwgdGhlIGNsaWVudCBuZWVkcyB0byBkbyBpcyB0ZWxsIHRoaXMgbW9kdWxlIHRoZSBwYWdlIGNvb3JkaW5hdGVzIG9mIHdoZXJlXG4vLyB0aGUgbWVudSBzaG91bGQgYXBwZWFyLiBFLmcuOlxuLy9cbi8vICAgJCgnI21haW50YWJsZScpLm9uKCdjb250ZXh0bWVudScsICd0ZCcsIGZ1bmN0aW9uKGUpIHtcbi8vICAgICAgIG1lbnUuc2hvdyhlLnBhZ2VYLCBlLnBhZ2VZKVxuLy8gICB9KVxuLy9cbi8vIFRoZSBtZW51IHdpbGwgYmUgY3JlYXRlZCB3aXRoIGl0cyB0b3AtbGVmdCBjb3JuZXIgYXQgZXhhY3RseSB0aGF0IHBvc2l0aW9uLFxuLy8gdW5sZXNzIGl0IHdvdWxkIG5vdCBmaXQgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHZpZXdwb3J0LiBJZiB0aGF0IGlzIHRoZVxuLy8gY2FzZSBpdCB3aWxsIGdldCBzaGlmdGVkIGxlZnQgYW5kIHVwIGFzIG11Y2ggYXMgaXMgbmVlZGVkIHRvIG1ha2UgaXQgZml0LlxuLy9cbi8vXG4vLyBDcmVhdGluZyB0aGUgbWVudSBpcyBkb25lIGJ5IGNhbGxpbmcgJGNvbnRleHQuY3JlYXRlKC4uLikgYW5kIHBhc3NpbmcgaXQgYVxuLy8gamF2YXNjcmlwdCBhcnJheSB3aGljaCBkZWZpbmVzIHRoZSBtZW51IHN0cnVjdHVyZS4gRS5nLjpcbi8vXG4vLyAgIG1lbnUgPSAkY29udGV4dC5jcmVhdGUoW1xuLy8gICAgIGl0ZW1fMSxcbi8vICAgICBpdGVtXzIsXG4vLyAgICAgLi4uXG4vLyAgICAgaXRlbV9uLFxuLy8gICBdKVxuLy9cbi8vIFRoZSBtZW51cyBnZXQgYXR0YWNoZWQgdG8gdGhlIERPTSwgc28gaXQgaXMgYmVzdCB0byBvbmx5IGNyZWF0ZSB0aGVtIG9uY2UuXG4vLyBXaGVuIGEgbWVudSBjbG9zZXMgdGhleSBkbyBub3QgZ2V0IGNsZWFuZWQgdXAuIENsZWFudXAgc2hvdWxkIGJlIGRvbmVcbi8vIGV4cGxpY2l0bHksIGJ1dCB0aGVyZSBpcyBubyBzdXBwb3J0aW5nIGZ1bmN0aW9uIHlldCB0byBkbyBzby4gKFRPRE8hKVxuLy9cbi8vXG4vLyBFYWNoIG1lbnUgaXRlbSBpcyBhIGphdmFzY3JpcHQgb2JqZWN0IHdoaWNoIGRlZmluZXMgc29tZSBiYXNpYyBkYXRhLiBBdCB0aGVcbi8vIGhlYXJ0IG9mIGV2ZXJ5dGhpbmcgaXMgaXRzIHR5cGUsIHdoaWNoIGNhbiBiZSBhbnl0aGluZyBzdXBwb3J0ZWQgYnkgdGhlXG4vLyAnZm9ybWF0dGVycycgbGlzdCB5b3UnbGwgZmluZCBmdXJ0aGVyIGRvd24gaW4gdGhlIGNvZGUuIEF0IHRoZSB0aW1lIG9mXG4vLyB3cml0aW5nIHRoZXNlIGFyZTogaXRlbSwgc2VwYXJhdG9yLCBzdWJtZW51LCBpbnB1dCBhbmQgY2hlY2tib3guIFRoZSB0eXBlIGdldHNcbi8vIHNwZWNpZmllZCB2aWEgYSAnYScgb3IgJ2FuJyBmaWVsZC4gRS5nLjpcbi8vXG4vLyAgIGl0ZW1fMSA9IHsgYW46ICdpdGVtJywgLi4uIH1cbi8vICAgaXRlbV8yID0geyBhOiAnc2VwYXJhdG9yJywgLi4uIH1cbi8vICAgaXRlbV8zID0geyBhOiAnc3VibWVudScsIC4uLiB9XG4vL1xuLy8gSWYgbm8gdHlwZSBpcyBzcGVjaWZpZWQgdGhlbiBpdCBpcyBhc3N1bWVkIHRvIGJlICdpdGVtJy4gVGhpcyBzaG91bGQgYmUgdGhlXG4vLyBjb21tb24gY2FzZS4gU28gJ2l0ZW1fMScgY291bGQgaGF2ZSBiZWVuIHJlZHVjZWQgdG86XG4vL1xuLy8gICBpdGVtXzEgPSB7IC4uLiB9XG4vL1xuLy8gQWxsIG1lbnUgaXRlbXMgY2FuIGhhdmUgYW4gb3B0aW9uYWwgJ2lkJyBmaWVsZC4gVGhpcyBhbGxvd3MgcmVmZXJyaW5nIHRvLFxuLy8gYW5kIG1hbmlwdWxhdGluZywgYSBzcGVjaWZpYyBtZW51IGl0ZW0gYWZ0ZXIgdGhlIG1lbnUgaGFzIGJlZW4gYnVpbHQuIFRoZVxuLy8gYWRkZWQgZWZmZWN0IGlzIHRoYXQgYSBkYXRhIGF0dHJpYnV0ZSAnZGF0YS1tZW51LWlkJyBpcyBhZGRlZCB0byB0aGUgRE9NXG4vLyBlbGVtZW50LCB3aGljaCBoZWxwcyBncmFiYmluZyBzcGVjaWZpYyBtZW51IGl0ZW1zIGluIGF1dG9tYXRlZCB0ZXN0cy5cbi8vXG4vLyBBbGwgb3RoZXIgZmllbGRzIHdoaWNoIGFyZSByZXF1aXJlZCBkZXBlbmQgb24gdGhlIHR5cGUgb2YgdGhlIG1lbnUgaXRlbS4gRm9yXG4vLyB0aGUgZGVmYXVsdCB0eXBlICdpdGVtJyB0aGVzZSBhcmU6XG4vLyAgIC0gdGV4dDogd2hpY2ggc2V0cyB0aGUgbWVudSBpdGVtJ3MgbGFiZWwuXG4vLyAgIC0gZm46IHdoaWNoIGRlZmluZXMgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSB0cmlnZ2VyZWQgd2hlbiB0aGUgbWVudSBpdGVtXG4vLyAgICAgZ2V0cyBhY3RpdmF0ZWQuIElmIHlvdSBkb24ndCBzcGVjaWZ5IGEgY2FsbGJhY2sgYW5kIGEgbWVudSBpdGVtIGdldHNcbi8vICAgICBhY3RpdmF0ZWQgdGhpcyBsaWJyYXJ5IHdpbGwgZmlyZSBhICdjbGljay1tZW51LWl0ZW0nIGV2ZW50LCB3aGljaCBjYW4gYmVcbi8vICAgICBoYW5kbGVkIGJ5IEpRdWVyeSBldmVudCBoYW5kbGVycy4gRS5nLjpcbi8vXG4vLyAgICAgJCgnYm9keScpLm9uKCdjbGljay1tZW51LWl0ZW0nLCBmdW5jdGlvbihlLCBtZW51X2l0ZW1fZGVmaW5pdGlvbikge1xuLy8gICAgICAgLi4uXG4vLyAgICAgfSlcbi8vXG4vLyBJdGVtIHZpc2liaWxpdHkgYW5kIGVuYWJsZW1lbnQ6XG4vLyBBbGwgbWVudSBpdGVtcyBoYXZlIGFuIG9wdGlvbmFsICdkaXNhYmxlaWYnIGFuZCAnaGlkZWlmJyBmaWVsZC4gVGhleSBhY2NlcHRcbi8vIGEgZnVuY3Rpb24gcGFyYW1ldGVyIGFuZCBjYW4gYmUgdXNlZCB0byByZXNwZWN0aXZlbHkgZGlzYWJsZSBvciBoaWRlIHRoZSBtZW51IGl0ZW0uXG4vL1xuLy8gU3VibWVudXMgYWxzbyBoYXZlIGEgbGFiZWwgd2hpY2ggeW91IGNhbiBkZWZpbmUgdmlhIHRoZSAndGV4dCcgZmllbGQuIEluXG4vLyBhZGRpdGlvbiBpdCBhY2NlcHRzIGEgJ3dpdGgnIGZpZWxkIHdoaWNoIGhvbGRzIHRoZSBkZWZpbml0aW9uIGZvciB0aGVcbi8vIHN1Ym1lbnUuIFRoaXMgYWdhaW4gY29uZm9ybXMgdG8gdGhlIGRlZmluaXRpb24gb2YgYW55IG1lbnUgKGkuZS4gYSBsaXN0IG9mXG4vLyBtZW51IGl0ZW1zKS4gRS5nLjpcbi8vXG4vLyAgIHN1Ym1lbnUgPSB7IGE6ICdzdWJtZW51JywgdGV4dDogJ1N1Ym1lbnUnLCB3aXRoOiBbXG4vLyAgICAgaXRlbV8xLFxuLy8gICAgIGl0ZW1fMixcbi8vICAgICAuLi5cbi8vICAgICBpdGVtX25cbi8vICAgXX1cbi8vXG4vLyBBc2lkZSBmcm9tIHRoYXQgc3VibWVudXMgY2FuIGFsc28gYmUgY3JlYXRlZCBkeW5hbWljYWxseS4gVG8gZG8gdGhhdCB5b3Vcbi8vIHNob3VsZCBub3QgcGFzcyBhbiBhcnJheSBhcyB0aGUgdmFsdWUgb2YgdGhlICd3aXRoJyBmaWVsZCBidXQgcGFzcyBhXG4vLyBmdW5jdGlvbiBpbnN0ZWFkLiBUaGlzIGZ1bmN0aW9uIHdpbGwgZ2V0IHRyaWdnZXJlZCB3aGVuIHRoZSBzdWJtZW51IHNob3VsZFxuLy8gYmVjb21lIHZpc2libGUsIGFuZCBpdCBzaG91bGQgcmV0dXJuIHRoZSBkZWZpbml0aW9uIG9mIHRoZSBzdWJtZW51IGFzIHVzdWFsLlxuLy8gU28gdGhlIGFib3ZlIGV4YW1wbGUgY291bGQgYWxzbyBoYXZlIGJlZW4gd3JpdHRlbiBhczpcbi8vXG4vLyAgIHN1Ym1lbnUgPSB7IGE6ICdzdWJtZW51JywgdGV4dDogJ1N1Ym1lbnUnLCB3aXRoOiBmdW5jdGlvbigpIHtcbi8vICAgICByZXR1cm4gW1xuLy8gICAgICAgaXRlbV8xLFxuLy8gICAgICAgaXRlbV8yLFxuLy8gICAgICAgLi4uXG4vLyAgICAgICBpdGVtX25cbi8vICAgICBdXG4vLyAgIH19XG4vL1xuLy8gSGVyZSBpcyBhIG1vcmUgY29tcGxldGUgZXhhbXBsZSBvZiBhIG1lbnUgZGVmaW5pdGlvbiwgd2hpY2ggYWxzbyBzaG93c1xuLy8gZmllbGRzIGZvciBvdGhlciBtZW51IGl0ZW0gdHlwZXM6XG4vL1xuLy8gICBtZW51ID0gJGNvbnRleHQuY3JlYXRlKFtcbi8vICAgICB7IHRleHQ6ICdOZXcgRXZlbnQnLCBmbjogZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdORVcgRVZFTlQnKX0gfSxcbi8vICAgICB7IHRleHQ6ICdTZXQgYXMgVW5hdmFpbGFibGUnLCBmbjogbG9naXQgfSxcbi8vXG4vLyAgICAgeyBhOiAnc2VwYXJhdG9yJyB9LFxuLy9cbi8vICAgICB7IGE6ICdzdWJtZW51JywgdGV4dDogJ0Fzc2lnbiBTdGF0dXMnLCB3aXRoOiBbXG4vLyAgICAgICB7IHRleHQ6ICdObyBTdGF0dXMnIH0sXG4vLyAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIFJlcXVlc3QnIH0sXG4vLyAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uJyB9LFxuLy8gICAgICAgICAgIHsgdGV4dDogJ0NvbmZpcm1lZCBPcHRpb24nIH0sXG4vLyAgICAgICAgICAgeyB0ZXh0OiAnUGxhbm5lZCcgfSxcbi8vICAgICAgICAgICB7IHRleHQ6ICdMb2NrZWQnIH0sXG4vLyAgICAgICAgICAgeyB0ZXh0OiAnQ2FuY2VsbGVkJyB9XG4vLyAgICAgIF19LFxuLy8gICAgICB7IGE6ICdzdWJtZW51JywgdGV4dDogJ0Fzc2lnbiBSb2xlJywgd2l0aDogZHluYW1pY19pdGVtc19mbiB9LFxuLy9cbi8vICAgICAgeyBhOiAnc2VwYXJhdG9yJyB9LFxuLy9cbi8vICAgICAgeyB0ZXh0OiAnQ3V0JywgZGlzYWJsZWlmPWZ1bmN0aW9uKCl7IHJldHVybiB1c2VyIGNhbl9kZWxldGUgfX0sXG4vLyAgICAgIHsgdGV4dDogJ0NvcHknIH0sXG4vLyAgICAgIHsgdGV4dDogJ1Bhc3RlJyB9LFxuLy9cbi8vICAgICAgeyBhOiAnc2VwYXJhdG9yJyB9LFxuLy9cbi8vICAgICAgeyBhOiAnc3VibWVudScsIHRleHQ6ICdBZGQgdG8gR3JvdXAnLCB3aXRoOiBbIHsgYW46ICdzZWFyY2gnLCB0ZXh0OiAnU2VhcmNoIGNvbnRhY3QuLi4nLCBzb3VyY2U6IHNvdXJjZV9mbiwgc2VsZWN0OiBzZWxlY3RfZm4gfSBdLFxuLy9cbi8vICAgICAgeyBhbjogJ2lucHV0JyB9LFxuLy8gICAgICB7IGE6ICdjaGVja2JveCcsIHRleHQ6ICdDaGVjayA/JyB9LFxuLy8gICBdKVxuLy9cbi8vXG4vLyBJbiBhZGRpdGlvbiwgdGhlIG9wZW5pbmcgYW5kIGNsb3Npbmcgb2YgbWVudXMgYW5kIHN1Ym1lbnVzIGZpcmVzIGV2ZW50c1xuLy8gd2hpY2ggY2FuIGJlIGhhbmRsZXMgYnkgSlF1ZXJ5IGV2ZW50IGhhbmRsZXJzLiBFLmcuOlxuLy9cbi8vICAgJCgnYm9keScpLm9uKCdjbG9zZWQtbWVudScsIGZ1bmN0aW9uKGUpIHtcbi8vICAgICAgLi4uXG4vLyAgIH0pXG4vL1xuLy8gVGhlIGV2ZW50cyB3aGljaCBjYW4gYmUgd2F0Y2hlZCBmb3IgYXJlOlxuLy8gICAtIG9wZW5pbmctbWVudVxuLy8gICAtIGNsb3NlZC1tZW51XG4vLyAgIC0gb3BlbmluZy1zdWItbWVudVxuLy8gICAtIGNsb3NlZC1zdWItbWVudVxuXG5pbXBvcnQgKiBhcyBTZW50cnkgZnJvbSBcIkBzZW50cnkvYnJvd3NlclwiO1xuaW1wb3J0IHtpc1NlbnRyeUluaXRpYWxpemVkfSBmcm9tIFwiLi9zaGFyZWRzY3JpcHRzLXNlbnRyeVwiO1xuXG5leHBvcnQgY2xhc3MgU2hhcmVkc2NyaXB0c0NvbnRleHRtZW51IHtcbiAgY29uc3RydWN0b3IoaXRlbXMsIG9wdGlvbnMsIHJvb3RfbWVudSkge1xuICAgIHRoaXMubWVudSA9IG51bGw7XG4gICAgdGhpcy5yb290X21lbnUgPSByb290X21lbnUgfHwgdGhpcztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgdGhpcy5pZGVudGlmaWVkID0ge307XG5cbiAgICB0aGlzLmFjdGl2ZV9zdWJtZW51X2l0ZW0gPSBudWxsO1xuICAgIHRoaXMuYWN0aXZlX3N1Ym1lbnUgPSBudWxsO1xuXG4gICAgdGhpcy5pc19zaG93biA9IGZhbHNlO1xuICAgIHRoaXMueCA9IG51bGw7XG4gICAgdGhpcy55ID0gbnVsbDtcbiAgICB0aGlzLmlzTWFjID1cbiAgICAgIG5hdmlnYXRvci5wbGF0Zm9ybS5tYXRjaCgvbWFjL2kpICE9PSBudWxsICYmXG4gICAgICBuYXZpZ2F0b3IucGxhdGZvcm0ubWF0Y2goL21hYy9pKS5sZW5ndGggPiAwO1xuICAgIHRoaXMuY2xvbmVzID0gW107XG4gICAgdGhpcy5jYWNoZWRfc3VibWVudV9pdGVtcyA9IHt9O1xuICAgIHRoaXMudGltZXIgPSBudWxsO1xuXG4gICAgdGhpcy5zZXR1cF9jb250YWluZXIoKTtcbiAgICB0aGlzLnNldHVwX2l0ZW1zKGl0ZW1zKTtcbiAgICB0aGlzLnNldHVwX2ludGVyYWN0aW9ucygpO1xuICB9XG5cbiAgc2V0dXBfY29udGFpbmVyKCkge1xuICAgIHRoaXMubWVudSA9ICQoJzx1bD4nKTtcbiAgICBpZiAodGhpcy5yb290X21lbnUgPT09IHRoaXMpIHtcbiAgICAgIHRoaXMubWVudS5hZGRDbGFzcygnbWVudScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1lbnUuYWRkQ2xhc3MoJ3N1Ym1lbnUnKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc3ViTWVudUNzc0NsYXNzZXMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnN1Yk1lbnVDc3NDbGFzc2VzLmZvckVhY2goXG4gICAgICAgICAgZnVuY3Rpb24oY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgIHRoaXMubWVudS5hZGRDbGFzcyhjc3NDbGFzcyk7XG4gICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuY29udGFpbmVyQ3NzQ2xhc3Nlcykge1xuICAgICAgdGhpcy5tZW51LnJlbW92ZUNsYXNzKCdtZW51Jyk7XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyQ3NzQ2xhc3Nlcy5mb3JFYWNoKFxuICAgICAgICBmdW5jdGlvbihjc3NDbGFzcykge1xuICAgICAgICAgIHRoaXMubWVudS5hZGRDbGFzcyhjc3NDbGFzcyk7XG4gICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5pZCkgdGhpcy5tZW51LmF0dHIoJ2lkJywgdGhpcy5vcHRpb25zLmlkKTtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMuY2xvc2VPbk1vdXNlT3V0KSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMubWVudS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgICAgaWYgKHNlbGYucm9vdF9tZW51ID09PSBzZWxmKSB7XG4gICAgICAgICAgICBzZWxmLm9wdGlvbnMub25DbG9zZU1vdXNlT3V0ICYmIHNlbGYub3B0aW9ucy5vbkNsb3NlTW91c2VPdXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHNlbGYub3B0aW9ucy5jbG9zZUFmdGVyIHx8IDUwMCk7XG4gICAgICB9KTtcbiAgICAgIC8qIElmIGEgbW91c2VvdmVyIGhhcHBlbnMgd2hpbGUgdGhlIHRpbWVyIG9uIG1vdXNlbGVhdmUgaXMgc3RpbGwgY291bnRpbmcsXG4gICAgICAgICBjYW5jZWwgdGhlIGNsb3NlIGFjdGlvbi4gICovXG4gICAgICB0aGlzLm1lbnUub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy50aW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcbiAgICAgICAgICB0aGlzLnRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHNldHVwX2l0ZW1zKGl0ZW1zKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zW2ldO1xuICAgICAgY29uc3QgZWxlbWVudCA9ICQoJzxsaT4nKS5hZGRDbGFzcygnZGV2LW1lbnUtaXRlbScpO1xuICAgICAgaWYgKGl0ZW0uY2xhc3MpIGVsZW1lbnQuYWRkQ2xhc3MoaXRlbS5jbGFzcyk7XG4gICAgICBlbGVtZW50LmRhdGEoJ2Rldi1tZW51LWl0ZW0nLCBpdGVtKTtcblxuICAgICAgZm9ybWF0KGl0ZW0sIGVsZW1lbnQsIHRoaXMpO1xuICAgICAgaWYgKGl0ZW0uaGlkZWlmICE9PSB1bmRlZmluZWQpIGVsZW1lbnQuZGF0YSgnaGlkZWlmJywgaXRlbS5oaWRlaWYpO1xuICAgICAgaWYgKGl0ZW0uZGlzYWJsZWlmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZWxlbWVudC5kYXRhKCdkaXNhYmxlaWYnLCBpdGVtLmRpc2FibGVpZik7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbS5zaG93aWYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbGVtZW50LmRhdGEoJ3Nob3dpZicsIGl0ZW0uc2hvd2lmKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgaXRlbS50ZXh0ID09PSAnZnVuY3Rpb24nKSBlbGVtZW50LmRhdGEoJ3RleHRfZm4nLCBpdGVtLnRleHQpO1xuICAgICAgaWYgKGl0ZW0uaHRtbEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgZWxlbWVudC5kYXRhKCdodG1sQXR0cmlidXRlcycsIGl0ZW0uaHRtbEF0dHJpYnV0ZXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXRlbS5pZCkge1xuICAgICAgICBlbGVtZW50LmF0dHIoJ2RhdGEtbWVudS1pZCcsIGl0ZW0uaWQpO1xuICAgICAgICB0aGlzLmlkZW50aWZpZWRbaXRlbS5pZF0gPSB7XG4gICAgICAgICAgaXRlbSxcbiAgICAgICAgICBlbGVtZW50XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtLmZvY3VzKSBlbGVtZW50LmF0dHIoJ2RhdGEtZm9jdXMnLCB0cnVlKTtcbiAgICAgIHRoaXMubWVudS5hcHBlbmQoZWxlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIHNldHVwX2ludGVyYWN0aW9ucygpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcztcblxuICAgIC8vIFByZXZlbnQgY2xpY2tzIGZyb20gc2VlcGluZyB0aHJvdWdoIHRoZSBjb250ZXh0IG1lbnUsIHdoaWNoIG1pZ2h0XG4gICAgLy8gb3RoZXJ3aXNlIGNsb3NlIHRoZSBtZW51IHByZW1hdHVyZWx5LlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgdGhpcy5tZW51Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyBTYW1lIGZvciBpbnB1dCBmaWVsZHMgc2hvd24gaW4gdGhlIG1lbnUuIEludGVyYWN0aW5nIHdpdGggdGhlbSBzaG91bGRcbiAgICAvLyBub3QgY2xvc2UgdGhlIG1lbnUuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICB0aGlzLm1lbnUub24oJ2NsaWNrJywgJ2lucHV0JywgZnVuY3Rpb24oZSkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9KTtcblxuICAgIC8vIENsaWNraW5nIG9uIGEgbWVudSBpdGVtIHRyaWdnZXJzIGFuIGFjdGlvbiBldmVudC5cbiAgICB0aGlzLm1lbnUub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5kZXYtbWVudS1pdGVtOm5vdCguc2VwYXJhdG9yKTpub3QoLmRpc2FibGVkKScsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gJCh0aGlzKS5kYXRhKCdkZXYtbWVudS1pdGVtJyk7XG4gICAgICAgIGxvZ0FjdGlvbihgQ2xpY2tlZCBvbiAke2RlZmluaXRpb24udGV4dH1gKTtcblxuICAgICAgICBpZiAoZGVmaW5pdGlvbi5mbikge1xuICAgICAgICAgIGRlZmluaXRpb24uZm4oZSk7XG4gICAgICAgICAgaWYgKChkZWZpbml0aW9uLmEgfHwgZGVmaW5pdGlvbi5hbikgIT09ICdzdWJtZW51Jykge1xuICAgICAgICAgICAgY29udGV4dC5yb290X21lbnUuY2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGV4dC5tZW51LnRyaWdnZXIoJ2NsaWNrLW1lbnUtaXRlbScsIGRlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcblxuICAgIC8vIFN1Ym1lbnUgaW50ZXJhY3Rpb24uXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICB0aGlzLm1lbnUub24oJ21vdXNlb3ZlcicsICcuZGV2LW1lbnUtaXRlbScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSByZXR1cm47XG5cbiAgICAgIGlmIChjb250ZXh0LmFjdGl2ZV9zdWJtZW51X2l0ZW0pIGNvbnRleHQuYWN0aXZlX3N1Ym1lbnVfaXRlbS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgJCh0aGlzKS5kYXRhKCdkZXYtbWVudS1pdGVtJykuYSAhPT0gJ3N1Ym1lbnUnICYmXG4gICAgICAgICQodGhpcykuZGF0YSgnZGV2LW1lbnUtaXRlbScpLmFuICE9PSAnc3VibWVudSdcbiAgICAgICkge1xuICAgICAgICBjb250ZXh0LmFjdGl2ZV9zdWJtZW51X2l0ZW0gPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGV4dC5hY3RpdmVfc3VibWVudV9pdGVtID0gJCh0aGlzKTtcbiAgICAgICAgY29udGV4dC5hY3RpdmVfc3VibWVudV9pdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH1cblxuICAgICAgdG9nZ2xlX3N1Ym1lbnVfYXNfbmVlZGVkKCk7XG4gICAgfSk7XG5cbiAgICAvLyBTaG93L0hpZGUgc3VibWVudXMgYXMgbmVlZGVkLlxuICAgIC8vIFRoaXMgZ2V0cyBkZWJvdW5jZWQgdG8gcHJldmVudCB2aXN1YWwgYXJ0ZWZhY3RzLlxuICAgIGNvbnN0IHRvZ2dsZV9zdWJtZW51X2FzX25lZWRlZCA9IGRlYm91bmNlKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKFxuICAgICAgICBjb250ZXh0LmFjdGl2ZV9zdWJtZW51ICYmXG4gICAgICAgIGNvbnRleHQuYWN0aXZlX3N1Ym1lbnUuaXNfc2hvd24gJiZcbiAgICAgICAgY29udGV4dC5hY3RpdmVfc3VibWVudV9pdGVtICYmXG4gICAgICAgIGNvbnRleHQuYWN0aXZlX3N1Ym1lbnUgPT09IGNvbnRleHQuYWN0aXZlX3N1Ym1lbnVfaXRlbS5kYXRhKCdzdWJtZW51JylcbiAgICAgICkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChjb250ZXh0LmFjdGl2ZV9zdWJtZW51KSBjb250ZXh0LmFjdGl2ZV9zdWJtZW51LmNsb3NlKCk7XG5cbiAgICAgIGlmIChjb250ZXh0LmFjdGl2ZV9zdWJtZW51X2l0ZW0pIHtcbiAgICAgICAgY29udGV4dC5hY3RpdmVfc3VibWVudSA9IGNvbnRleHQuYWN0aXZlX3N1Ym1lbnVfaXRlbS5kYXRhKCdzdWJtZW51Jyk7XG5cbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IGNvbnRleHQuYWN0aXZlX3N1Ym1lbnVfaXRlbS5kYXRhKCdkZXYtbWVudS1pdGVtJyk7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gZGVmaW5pdGlvbi53aXRoO1xuICAgICAgICBjb25zdCBjcmVhdGVTdWJNZW51ID0gZnVuY3Rpb24oaXRlbXMsIG9wdGlvbnMsIGNvbnRleHQpIHtcbiAgICAgICAgICBvcHRpb25zLmlkID0gJ3N1Ym1lbnUnO1xuICAgICAgICAgIG9wdGlvbnMuZm9yID0gZGVmaW5pdGlvbi50ZXh0O1xuICAgICAgICAgIGNvbnRleHQuYWN0aXZlX3N1Ym1lbnUgPSBuZXcgU2hhcmVkc2NyaXB0c0NvbnRleHRtZW51KGl0ZW1zLCBvcHRpb25zLCBjb250ZXh0KTtcbiAgICAgICAgICBjb250ZXh0LmFjdGl2ZV9zdWJtZW51X2l0ZW0uZGF0YSgnc3VibWVudScsIGNvbnRleHQuYWN0aXZlX3N1Ym1lbnUpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb250ZXh0SGFzU3VibWVudUZvckRlZmluaXRpb24gPSBmdW5jdGlvbihkZWZpbml0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQuYWN0aXZlX3N1Ym1lbnUgJiYgY29udGV4dC5hY3RpdmVfc3VibWVudS5vcHRpb25zLmZvciA9PT0gZGVmaW5pdGlvbi50ZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIGxvZ0FjdGlvbihgT3BlbmluZyBzdWJtZW51IGZvciAke2RlZmluaXRpb24udGV4dH1gKTtcblxuICAgICAgICAvLyBBc3luYyBmdW5jdGlvblxuICAgICAgICBpZiAodHlwZW9mIGl0ZW1zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY29uc3QgY2FjaGVkX2l0ZW1zID0gY29udGV4dC5yb290X21lbnUuY2FjaGVkX3N1Ym1lbnVfaXRlbXNbZGVmaW5pdGlvbi50ZXh0XTtcbiAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5yZWJ1aWxkU3VibWVudSB8fCAhY2FjaGVkX2l0ZW1zKSB7XG4gICAgICAgICAgICBpdGVtcyh0cnVlLCBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgLyogSWYgdGhlIGFjdGl2ZV9zdWJtZW51X2l0ZW0gaXMgbm8gbG9uZ2VyIHNldCwgdGhlIHVzZXIgaGFzIHNlbGVjdGVkIGFub3RoZXIgbWVudSBpdGVtLlxuICAgICAgICAgICAgICAgICBEaXNjYXJkIHRoZSByZXN1bHRzIG9mIHRoZSBhc3luYyBjYWxsIGFuZCBkbyBub3Qgc2hvdyB0aGUgc3VibWVudSAqL1xuICAgICAgICAgICAgICBpZiAoY29udGV4dC5hY3RpdmVfc3VibWVudV9pdGVtKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlU3ViTWVudShyZXMsIGNvbnRleHQub3B0aW9ucywgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5hY3RpdmVfc3VibWVudS5zaG93X2Zvcihjb250ZXh0LmFjdGl2ZV9zdWJtZW51X2l0ZW0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnRleHQucm9vdF9tZW51LmNhY2hlZF9zdWJtZW51X2l0ZW1zW2RlZmluaXRpb24udGV4dF0gPSByZXM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3JlYXRlU3ViTWVudShjYWNoZWRfaXRlbXMsIGNvbnRleHQub3B0aW9ucywgY29udGV4dCk7XG4gICAgICAgICAgICBjb250ZXh0LmFjdGl2ZV9zdWJtZW51LnNob3dfZm9yKGNvbnRleHQuYWN0aXZlX3N1Ym1lbnVfaXRlbSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8qIFJlY3JlYXRlIHRoZSBtZW51IGlmIGV4cGxpY2l0bHkgY29uZmlndXJlZCBvciBpZiB0aGUgY3VycmVudCBzdWJtZW51IGlzIG5vdCBzZXQgb3IgZm9yIGFub3RoZXIgZGVmaW5pdGlvbiAqL1xuICAgICAgICAgIGlmICghY29udGV4dEhhc1N1Ym1lbnVGb3JEZWZpbml0aW9uKGRlZmluaXRpb24pIHx8IGRlZmluaXRpb24ucmVidWlsZFN1Ym1lbnUpIHtcbiAgICAgICAgICAgIGNyZWF0ZVN1Yk1lbnUoaXRlbXMsIGNvbnRleHQub3B0aW9ucywgY29udGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRleHQuYWN0aXZlX3N1Ym1lbnUuc2hvd19mb3IoY29udGV4dC5hY3RpdmVfc3VibWVudV9pdGVtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIDI1MCk7XG5cbiAgICAvLyBDbGlja2luZyBvdXRzaWRlIHRoZSBjb250ZXh0IG1lbnUgbXVzdCBoaWRlIGl0LlxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoZS5jdHJsS2V5ICYmIGNvbnRleHQuaXNNYWMpIHJldHVybjtcbiAgICAgIGNvbnRleHQuY2xvc2UoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBTaG93IHRoZSBtZW51IGFzIG5lYXIgYXMgcG9zc2libGUgdG8gdGhlIHJlcXVlc3RlZCBjb29yZGluYXRlcywgYnV0XG4gIC8vIG1ha2luZyBzdXJlIHRoYXQgdGhlIGVudGlyZSBtZW51IHN0YXlzIHZpc2libGUuLi5cbiAgc2hvdyh4LCB5KSB7XG4gICAgY29uc3QgbWF4X3ggPSAkKGRvY3VtZW50KS53aWR0aCgpO1xuICAgIGNvbnN0IG1heF95ID0gJChkb2N1bWVudCkuaGVpZ2h0KCk7XG5cbiAgICBjb25zdCB3aWR0aCA9IHRoaXMubWVudS53aWR0aCgpO1xuICAgIGNvbnN0IGhlaWdodCA9IHRoaXMubWVudS5oZWlnaHQoKTtcblxuICAgIHggPSBNYXRoLm1heCgwLCBNYXRoLm1pbih4LCBtYXhfeCAtIHdpZHRoKSk7XG4gICAgeSA9IE1hdGgubWF4KDAsIE1hdGgubWluKHksIG1heF95IC0gaGVpZ2h0KSk7XG5cbiAgICB0aGlzLnNob3dfYXQoeCwgeSk7XG4gIH07XG5cbiAgc2hvd19mb3IobWVudV9pdGVtKSB7XG4gICAgaWYgKHRoaXMuaXNfc2hvd24pIHJldHVybjtcblxuICAgIHRoaXMucHJlcGFyZV9zaG93KCk7XG5cbiAgICB0aGlzLm1lbnUuaGlkZSgpO1xuICAgICQobWVudV9pdGVtKS5hcHBlbmQodGhpcy5tZW51KTtcbiAgICB0aGlzLm1lbnVcbiAgICAgIC5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpXG4gICAgICAuaGlkZSgpXG4gICAgICAuZmFkZUluKDEwMCk7XG5cbiAgICBpZiAodGhpcy5tZW51LndpZHRoKCkgKyBtZW51X2l0ZW0ub2Zmc2V0KCkubGVmdCArIG1lbnVfaXRlbS53aWR0aCgpID4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoICsgJCh3aW5kb3cpLnNjcm9sbExlZnQoKSkge1xuICAgICAgY29uc3QgbGVmdCA9IHRoaXMubWVudS53aWR0aCgpID4gbWVudV9pdGVtLndpZHRoKCkgPyBtZW51X2l0ZW0ud2lkdGgoKSAtIHRoaXMubWVudS53aWR0aCgpIDogNTtcbiAgICAgIHRoaXMubWVudS5jc3MoJ2xlZnQnLCBgJHtsZWZ0fXB4YCkuY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpO1xuICAgIH1cblxuICAgIHRoaXMuaXNfc2hvd24gPSB0cnVlO1xuICAgIHRoaXMuYWZ0ZXJfc2hvdygpO1xuICB9O1xuXG4gIHNob3dfYXQoeCwgeSkge1xuICAgIGlmICh0aGlzLmlzX3Nob3duICYmIHRoaXMueCA9PT0geCAmJiB0aGlzLnkgPT09IHkpIHJldHVybjtcblxuICAgIC8vIE9ubHkgYXBwZW5kIHRoZSByb290IG1lbnUgdG8gdGhlIGJvZHksIHN1Ym1lbnVzIGFyZSBhcHBlbmRlZCB0byB0aGVpciBtZW51LWl0ZW0gZWxlbWVudFxuICAgIGlmICh0aGlzLnJvb3RfbWVudSA9PT0gdGhpcykgJCgnYm9keScpLmFwcGVuZCh0aGlzLm1lbnUpO1xuICAgIHRoaXMucHJlcGFyZV9zaG93KCk7XG5cbiAgICBsZXQgdG9wID0geTtcblxuICAgIGlmICgkKCdib2R5JykuaGVpZ2h0KCkgKyAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSAtIHkgPCB0aGlzLm1lbnUuaGVpZ2h0KCkpIHtcbiAgICAgIHRvcCAtPSAodGhpcy5tZW51LmhlaWdodCgpIC0gKCQoJ2JvZHknKS5oZWlnaHQoKSArICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIC0geSkgKyA1KTtcbiAgICB9XG5cbiAgICB0aGlzLm1lbnVcbiAgICAgIC5jc3MoJ3RvcCcsIGAke3RvcH1weGApXG4gICAgICAuY3NzKCdsZWZ0JywgYCR7eH1weGApXG4gICAgICAuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKVxuICAgICAgLmNzcygnei1pbmRleCcsIDk5OTk5OSlcbiAgICAgIC5oaWRlKClcbiAgICAgIC5mYWRlSW4oMTAwKTtcblxuICAgIHRoaXMuaXNfc2hvd24gPSB0cnVlO1xuICAgIHRoaXMuYWZ0ZXJfc2hvdygpO1xuICB9O1xuXG4gIHByZXBhcmVfc2hvdygpIHtcbiAgICBpZiAodGhpcy5hY3RpdmVfc3VibWVudV9pdGVtKSB7XG4gICAgICB0aGlzLmFjdGl2ZV9zdWJtZW51X2l0ZW0ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgdGhpcy5hY3RpdmVfc3VibWVudV9pdGVtID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3RpdmVfc3VibWVudSkge1xuICAgICAgdGhpcy5hY3RpdmVfc3VibWVudS5jbG9zZSgpO1xuICAgICAgdGhpcy5hY3RpdmVfc3VibWVudSA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5tZW51XG4gICAgICAuZmluZCgnbGknKVxuICAgICAgLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ2hpZGVpZicpICYmICQodGhpcykuZGF0YSgnaGlkZWlmJykoKSkge1xuICAgICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQodGhpcykuc2hvdygpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ2Rpc2FibGVpZicpKSB7XG4gICAgICAgICAgY29uc3QgZGlzYWJsZWlmID0gJCh0aGlzKS5kYXRhKCdkaXNhYmxlaWYnKTtcbiAgICAgICAgICBpZiAoKHR5cGVvZiBkaXNhYmxlaWYgPT09ICdib29sZWFuJyAmJiBkaXNhYmxlaWYpIHx8ICQodGhpcykuZGF0YSgnZGlzYWJsZWlmJykoKSkge1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgICAgLmZpbmQoJz4gYScpXG4gICAgICAgICAgICAgIC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgICAgLmZpbmQoJz4gYScpXG4gICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCQodGhpcykuZGF0YSgnc2hvd2lmJykpIHtcbiAgICAgICAgICBpZiAoISQodGhpcykuZGF0YSgnc2hvd2lmJykoKSkge1xuICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5kYXRhKCdodG1sQXR0cmlidXRlcycpKSB7XG4gICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9ICQodGhpcykuZGF0YSgnaHRtbEF0dHJpYnV0ZXMnKTtcbiAgICAgICAgICBjb25zdCBlbGVtZW50ID0gJCh0aGlzKTtcbiAgICAgICAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgJChlbGVtZW50KS5kYXRhKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5kYXRhKCd0ZXh0X2ZuJykpIHtcbiAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAuZmluZCgnYScpXG4gICAgICAgICAgICAuaHRtbCgkKHRoaXMpLmRhdGEoJ3RleHRfZm4nKSgpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgaWYgKHRoaXMucm9vdF9tZW51ID09PSB0aGlzKSB7XG4gICAgICB0aGlzLm1lbnUudHJpZ2dlcignb3BlbmluZy1tZW51Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQodGhpcy5tZW51KS50cmlnZ2VyKCdvcGVuaW5nLXN1Yi1tZW51Jyk7XG4gICAgfVxuICB9O1xuXG4gIGFmdGVyX3Nob3coKSB7XG4gICAgdGhpcy5tZW51LmZpbmQoJ2xpJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ2ZvY3VzJykpIHtcbiAgICAgICAgJCh0aGlzKVxuICAgICAgICAgIC5maW5kKCdpbnB1dCcpXG4gICAgICAgICAgLmZvY3VzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgY2xvc2UoKSB7XG4gICAgaWYgKCF0aGlzLmlzX3Nob3duKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5hY3RpdmVfc3VibWVudV9pdGVtKSB7XG4gICAgICB0aGlzLmFjdGl2ZV9zdWJtZW51X2l0ZW0ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgaWYgKHRoaXMuYWN0aXZlX3N1Ym1lbnVfaXRlbS5kYXRhKCdzdWJtZW51JykgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmFjdGl2ZV9zdWJtZW51X2l0ZW0uZGF0YSgnc3VibWVudScpLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogQWRkIHRoZSBjbG9uZSBlbGVtZW50IGJhY2sgb24gdGhlIHBhZ2UgKi9cbiAgICB0aGlzLmNsb25lcy5mb3JFYWNoKGZ1bmN0aW9uKGNsb25lRWxlbWVudCkge1xuICAgICAgY2xvbmVFbGVtZW50LmFwcGVuZFRvKGNsb25lRWxlbWVudC5kYXRhKCdwYXJlbnQnKSk7XG4gICAgfSk7XG4gICAgLyogUmVzZXQgY2FjaGVkIHN1Ym1lbnUgaXRlbXMgKi9cbiAgICB0aGlzLmNhY2hlZF9zdWJtZW51X2l0ZW1zID0ge307XG5cbiAgICB0aGlzLmlzX3Nob3duID0gZmFsc2U7XG4gICAgdGhpcy5tZW51LmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKS5mYWRlT3V0KDEwMCk7XG4gICAgaWYgKHRoaXMucm9vdF9tZW51ID09PSB0aGlzKSB7XG4gICAgICB0aGlzLm1lbnUudHJpZ2dlcignY2xvc2VkLW1lbnUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tZW51LnRyaWdnZXIoJ2Nsb3NlZC1zdWItbWVudScpO1xuICAgIH1cbiAgICB0aGlzLm1lbnUuZGV0YWNoKCk7XG4gIH07XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLm1lbnUucmVtb3ZlKCk7XG4gIH07XG5cbiAgZW5hYmxlKGlkKSB7XG4gICAgaWYgKHRoaXMuaWRlbnRpZmllZFtpZF0pIHtcbiAgICAgIHRoaXMuaWRlbnRpZmllZFtpZF0uZWxlbWVudC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIHRoaXMuaWRlbnRpZmllZFtpZF0uZWxlbWVudC5maW5kKCc+IGEnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5pZGVudGlmaWVkW2lkXS5lbGVtZW50LmRhdGEoJ2Rpc2FibGVpZicpID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhpcy5pZGVudGlmaWVkW2lkXS5lbGVtZW50LmRhdGEoJ2Rpc2FibGVpZicsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZW5hYmxlX2FsbCgpIHtcbiAgICBjb25zdCBpZHMgPSBPYmplY3Qua2V5cyh0aGlzLmlkZW50aWZpZWQpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB0aGlzLmVuYWJsZShpZHNbaV0pO1xuICB9O1xuXG4gIGRpc2FibGUoaWQpIHtcbiAgICBpZiAodGhpcy5pZGVudGlmaWVkW2lkXSkge1xuICAgICAgdGhpcy5pZGVudGlmaWVkW2lkXS5lbGVtZW50LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmlkZW50aWZpZWRbaWRdLmVsZW1lbnQuZGF0YSgnZGlzYWJsZWlmJykgPT09ICdib29sZWFuJykge1xuICAgICAgICB0aGlzLmlkZW50aWZpZWRbaWRdLmVsZW1lbnQuZGF0YSgnZGlzYWJsZWlmJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGRpc2FibGVfYWxsKCkge1xuICAgIGNvbnN0IGlkcyA9IE9iamVjdC5rZXlzKHRoaXMuaWRlbnRpZmllZCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHRoaXMuZGlzYWJsZShpZHNbaV0pO1xuICB9O1xuXG4gIHNldF90ZXh0KGlkLCB0ZXh0KSB7XG4gICAgY29uc3QgaWRkID0gdGhpcy5pZGVudGlmaWVkW2lkXTtcbiAgICBpZiAoaWRkLml0ZW0udGV4dCkge1xuICAgICAgaWRkLml0ZW0udGV4dCA9IHRleHQ7XG4gICAgICBpZGQuZWxlbWVudC5maW5kKCdhLm1lbnUtYWN0aW9uJykudGV4dCh0ZXh0KTtcbiAgICB9XG4gIH07XG5cbiAgZ2V0X2h0bWxhdHRyaWJ1dGUoaWQsIGtleSkge1xuICAgIGlmICh0aGlzLmlkZW50aWZpZWRbaWRdKSB7XG4gICAgICBpZiAodGhpcy5pZGVudGlmaWVkW2lkXS5pdGVtLmh0bWxBdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkZW50aWZpZWRbaWRdLml0ZW0uaHRtbEF0dHJpYnV0ZXNba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgc2V0X2h0bWxhdHRyaWJ1dGUoaWQsIGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBpZGQgPSB0aGlzLmlkZW50aWZpZWRbaWRdO1xuICAgIGlmIChpZGQpIHtcbiAgICAgIGNvbnN0IGh0bWxBdHRyaWJ1dGVzID0gaWRkLml0ZW0uaHRtbEF0dHJpYnV0ZXMgfHwge307XG4gICAgICBodG1sQXR0cmlidXRlc1trZXldID0gdmFsdWU7XG4gICAgICBpZGQuaXRlbS5odG1sQXR0cmlidXRlcyA9IGh0bWxBdHRyaWJ1dGVzO1xuICAgICAgaWRkLmVsZW1lbnQuZGF0YShrZXksIHZhbHVlKTtcbiAgICB9XG4gIH07XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IGZvcm1hdHRlcnMgPSB7XG5cbiAgc2VwYXJhdG9yKGRlZmluaXRpb24sIGVsZW1lbnQsIG1lbnVjb250ZXh0KSB7XG4gICAgZWxlbWVudC5hZGRDbGFzcygnc2VwYXJhdG9yJyk7XG4gIH0sXG5cbiAgaXRlbShkZWZpbml0aW9uLCBlbGVtZW50LCBtZW51Y29udGV4dCkge1xuICAgIGNvbnN0IHRleHQgPSB0eXBlb2YgZGVmaW5pdGlvbi50ZXh0ID09PSAnZnVuY3Rpb24nID8gZGVmaW5pdGlvbi50ZXh0IDogZGVmaW5pdGlvbi50ZXh0LnJlcGxhY2UoL1xccy9nLCAnJm5ic3A7Jyk7IC8vIFByZXNlcnZlIHdoaXRlc3BhY2VzIGluIHRoZSB0ZXh0XG4gICAgaWYgKGRlZmluaXRpb24uY3NzQ2xhc3MpIHtcbiAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoZGVmaW5pdGlvbi5jc3NDbGFzcyk7XG4gICAgfVxuICAgICQoJzxhIGNsYXNzPVwibWVudS1hY3Rpb25cIiBocmVmPVwiamF2YXNjcmlwdDp7fVwiPicpXG4gICAgICAuYXBwZW5kVG8oZWxlbWVudClcbiAgICAgIC5odG1sKHRleHQpO1xuXG4gICAgaWYgKGRlZmluaXRpb24uZGVsZXRlQWN0aW9uKSB7XG4gICAgICAkKCc8YSBjbGFzcz1cImRlc3Ryb3llclwiIGhyZWY9XCJqYXZhc2NyaXB0Ont9XCI+JylcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGRlZmluaXRpb24uZGVsZXRlQWN0aW9uKGUpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSlcbiAgICAgICAgLmFwcGVuZFRvKGVsZW1lbnQpXG4gICAgICAgIC5odG1sKCdkZWxldGUnKTtcbiAgICB9XG4gIH0sXG5cbiAgc3VibWVudShkZWZpbml0aW9uLCBlbGVtZW50LCBtZW51Y29udGV4dCkge1xuICAgICQoJzxhIGhyZWY9XCJqYXZhc2NyaXB0Ont9XCI+JylcbiAgICAgIC5odG1sKGRlZmluaXRpb24udGV4dClcbiAgICAgIC5hcHBlbmRUbyhlbGVtZW50LmFkZENsYXNzKCdicmFuY2gnKSk7XG4gIH0sXG5cbiAgaW5wdXQoZGVmaW5pdGlvbiwgZWxlbWVudCwgbWVudWNvbnRleHQpIHtcbiAgICBjb25zdCBpbnB1dCA9ICQoJzxpbnB1dD4nKVxuICAgICAgLmF0dHIoJ3R5cGUnLCAndGV4dCcpXG4gICAgICAuYXR0cigncGxhY2Vob2xkZXInLCBkZWZpbml0aW9uLnRleHQpO1xuICAgIGlmIChkZWZpbml0aW9uLmZvY3VzT25PcGVuKSB7XG4gICAgICBtZW51Y29udGV4dC5tZW51Lm9uKCdvcGVuaW5nLXN1Yi1tZW51JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgfSwgMTUwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZGVmaW5pdGlvbi5vbkVudGVyKSB7XG4gICAgICBpbnB1dC5vbigna2V5cHJlc3MnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgIGNvbnN0IGlucHV0VmFsdWUgPSBpbnB1dC52YWwoKTtcbiAgICAgICAgICBkZWZpbml0aW9uLm9uRW50ZXIoaW5wdXRWYWx1ZSk7XG4gICAgICAgICAgaW5wdXQudmFsKCcnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGVsZW1lbnQuYXBwZW5kKGlucHV0KTtcbiAgfSxcblxuICBzZWFyY2goZGVmaW5pdGlvbiwgZWxlbWVudCwgbWVudWNvbnRleHQpIHtcblxuICAgIGNvbnN0IHVwZGF0ZUlucHV0TWFyZ2luRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gJCgnLmlucHV0LWZpbHRlcicsIGVsZW1lbnQpLm91dGVyV2lkdGgoKSArIDEwO1xuICAgICAgICAkKHNlYXJjaGZpZWxkKS5jc3MoJ3BhZGRpbmctcmlnaHQnLCBgJHt3aWR0aC50b1N0cmluZygpfXB4YCk7XG4gICAgICB9LCAwKTtcbiAgICB9O1xuXG4gICAgLy8gSlEtVUkgQXV0b2NvbXBsZXRlIGF1dG9tYXRpY2FsbHkgYXBwZW5kcyB0aGUgc3VnZ2VzdGlvbiBtZW51IHRvIGEgcGFyZW50IG1hcmtlZCB3aXRoIC51aS1mcm9udFxuICAgIGNvbnN0IGNvbnRhaW5lciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ3VpLWZyb250IG1lbnVfX2F1dG9jb21wbGV0ZS1yZXN1bHQnKTtcbiAgICBjb25zdCBzZWFyY2hmaWVsZCA9ICQoJzxpbnB1dD4nKVxuICAgICAgLmF0dHIoJ3R5cGUnLCAndGV4dCcpXG4gICAgICAuYXR0cigncGxhY2Vob2xkZXInLCBkZWZpbml0aW9uLnRleHQpO1xuICAgIGlmIChkZWZpbml0aW9uLm9uTmV3KSB7XG4gICAgICBzZWFyY2hmaWVsZC5vbigna2V5dXAnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBkZWZpbml0aW9uLm9uTmV3KHNlYXJjaGZpZWxkLnZhbCgpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnRhaW5lci5hcHBlbmQoc2VhcmNoZmllbGQpO1xuICAgIGlmIChkZWZpbml0aW9uLndpdGhGaWx0ZXIpIHtcbiAgICAgIGNvbnN0IGZpbHRlciA9ICQoJzxzcGFuPicpLmFkZENsYXNzKCdzdWJtZW51LWZpbHRlciBpbnB1dC1maWx0ZXInKTtcbiAgICAgIGZpbHRlci5hdHRyKCd0aXRsZScsIGRlZmluaXRpb24uZmlsdGVyVG9vbHRpcEZ1bmN0aW9uKCkpO1xuICAgICAgZmlsdGVyLmh0bWwoZGVmaW5pdGlvbi5maWx0ZXJMYWJlbEZ1bmN0aW9uKCkpO1xuICAgICAgZmlsdGVyLm9uKCdjbGljaycsIGZ1bmN0aW9uKGNsaWNrRXZlbnQpIHtcbiAgICAgICAgY2xpY2tFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkZWZpbml0aW9uLmZpbHRlclRvZ2dsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICBmaWx0ZXIuYXR0cigndGl0bGUnLCBkZWZpbml0aW9uLmZpbHRlclRvb2x0aXBGdW5jdGlvbigpKTtcbiAgICAgICAgICBmaWx0ZXIuaHRtbChkZWZpbml0aW9uLmZpbHRlckxhYmVsRnVuY3Rpb24oKSk7XG4gICAgICAgICAgdXBkYXRlSW5wdXRNYXJnaW5GdW5jdGlvbigpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgY29udGFpbmVyLmFwcGVuZChmaWx0ZXIpO1xuICAgIH1cbiAgICBtZW51Y29udGV4dC5tZW51Lm9uKCdvcGVuaW5nLXN1Yi1tZW51JywgZnVuY3Rpb24oKSB7XG4gICAgICBzZWFyY2hmaWVsZC5nZXQoMCkudmFsdWUgPSAnJztcbiAgICAgIHVwZGF0ZUlucHV0TWFyZ2luRnVuY3Rpb24oKTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlYXJjaGZpZWxkLmZvY3VzKCk7XG4gICAgICB9LCAxNTApO1xuICAgIH0pO1xuXG4gICAgZWxlbWVudC5hcHBlbmQoY29udGFpbmVyKTtcblxuICAgIC8vIFRPRE86IG1vdmUgYXV0b2NvbXBsZXRlIGltcGxlbWVudGF0aW9uIHRvIHNlcGFyYXRlIG1vZHVsZSBmb3Igc2hhcmluZ1xuICAgIHNlYXJjaGZpZWxkLm5wUHJlc2V0QXV0b2NvbXBsZXRlKHtcbiAgICAgIGF1dG9Gb2N1czogdHJ1ZSxcbiAgICAgIG1pbkxlbmd0aDogZGVmaW5pdGlvbi5taW5MZW5ndGgsXG4gICAgICBtZXNzYWdlczoge1xuICAgICAgICBub1Jlc3VsdHMoKSB7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3VsdHMoKSB7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzb3VyY2U6IGRlZmluaXRpb24uc291cmNlLFxuICAgICAgY3JlYXRlKCkge1xuICAgICAgICBpZiAoZGVmaW5pdGlvbi53aXRoUHJlc2V0cykge1xuICAgICAgICAgIHNlYXJjaGZpZWxkLm9uKCdmb2N1cycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VhcmNoZmllbGQubnBQcmVzZXRBdXRvY29tcGxldGUoJ3NlYXJjaCcsICcnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNlbGVjdChldmVudCwgdWkpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGRlZmluaXRpb24uc2VsZWN0KGV2ZW50LCB1aSk7XG4gICAgICAgIG1lbnVjb250ZXh0LnJvb3RfbWVudS5jbG9zZSgpO1xuICAgICAgfSxcbiAgICAgIG9wZW4oZXZlbnQsIHVpKSB7XG4gICAgICAgICQoJy51aS1hdXRvY29tcGxldGUudWktbWVudScpXG4gICAgICAgICAgLmNzcygnbGVmdCcsIDApXG4gICAgICAgICAgLmNzcygndG9wJywgMClcbiAgICAgICAgICAuY3NzKCd3aWR0aCcsICdhdXRvJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgc2VhcmNocmVzdWx0cyhkZWZpbml0aW9uLCBlbGVtZW50LCBtZW51Y29udGV4dCkge1xuICAgIGVsZW1lbnQuYXBwZW5kKCQoJzxkaXY+JykuYXR0cignaWQnLCBkZWZpbml0aW9uLmlkKSk7XG4gIH0sXG5cbiAgY2hlY2tib3goZGVmaW5pdGlvbiwgZWxlbWVudCwgbWVudWNvbnRleHQpIHtcbiAgICBjb25zdCBjaGVja2JveCA9ICQoJzxpbnB1dD4nKS5hdHRyKCd0eXBlJywgJ2NoZWNrYm94Jyk7XG5cbiAgICBlbGVtZW50LmFwcGVuZChjaGVja2JveCkuYXBwZW5kKGRlZmluaXRpb24udGV4dCk7XG4gIH0sXG5cbiAgaG92ZXJhYmxlKGRlZmluaXRpb24sIGVsZW1lbnQsIG1lbnVjb250ZXh0KSB7XG4gICAgY29uc3QgdGV4dCA9IHR5cGVvZiBkZWZpbml0aW9uLnRleHQgPT09ICdmdW5jdGlvbicgPyBkZWZpbml0aW9uLnRleHQgOiBkZWZpbml0aW9uLnRleHQucmVwbGFjZSgvXFxzL2csICcmbmJzcDsnKTsgLy8gUHJlc2VydmUgd2hpdGVzcGFjZXMgaW4gdGhlIHRleHRcbiAgICAkKCc8YSBjbGFzcz1cIm1lbnUtYWN0aW9uXCIgaHJlZj1cImphdmFzY3JpcHQ6e31cIj4nKVxuICAgICAgLmFwcGVuZFRvKGVsZW1lbnQpXG4gICAgICAub24oJ21vdXNlb3ZlcicsIGRlZmluaXRpb24ubW91c2VvdmVyIHx8IGZ1bmN0aW9uKGUpIHtcbiAgICAgIH0pXG4gICAgICAub24oJ21vdXNlb3V0JywgZGVmaW5pdGlvbi5tb3VzZW91dCB8fCBmdW5jdGlvbihlKSB7XG4gICAgICB9KVxuICAgICAgLmh0bWwodGV4dCk7XG4gIH0sXG5cbiAgY2xvbmUoZGVmaW5pdGlvbiwgZWxlbWVudCwgbWVudWNvbnRleHQpIHtcbiAgICBjb25zdCBvcmlnaW5hbCA9ICQoYCMke2RlZmluaXRpb24uY2xvbmVJZH1gKTtcbiAgICBjb25zdCBjbG9uZSA9IG9yaWdpbmFsLmNsb25lKHRydWUpO1xuICAgIC8qIFJlbW92ZSB0aGUgb3JpZ2luYWwgZWxlbWVudCwga2VlcGluZyBpdCBpbiB0aGUgY2xvbmVzIGFycmF5LlxuICAgICAgIE5lY2Vzc2FyeSBzdWNoIHRoYXQgbm8gdHdvIGVsZW1lbnRzIHdpdGggdGhlIHNhbWUgaWQgYXJlIG9uIHRoZSBwYWdlXG4gICAgICAgYW5kIGNhbGxiYWNrIGZ1bmN0aW9ucyBvcGVyYXRlIG9uIHRoZSBjb3JyZWN0IGVsZW1lbnQgKi9cbiAgICBtZW51Y29udGV4dC5jbG9uZXMucHVzaChvcmlnaW5hbCk7XG4gICAgb3JpZ2luYWwuZGF0YSgncGFyZW50Jywgb3JpZ2luYWwucGFyZW50KCkpO1xuICAgIG9yaWdpbmFsLmRldGFjaCgpO1xuICAgIGNsb25lLnNob3coKTtcbiAgICBjbG9uZS5hcHBlbmRUbyhlbGVtZW50KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZm9ybWF0KGRlZmluaXRpb24sIGVsZW1lbnQsIG1lbnVjb250ZXh0KSB7XG4gIGNvbnN0IHR5cGUgPSBkZWZpbml0aW9uLmEgfHwgZGVmaW5pdGlvbi5hbiB8fCAnaXRlbSc7XG4gIGZvcm1hdHRlcnNbdHlwZV0oZGVmaW5pdGlvbiwgZWxlbWVudCwgbWVudWNvbnRleHQpO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBodHRwOi8vZGF2aWR3YWxzaC5uYW1lL2phdmFzY3JpcHQtZGVib3VuY2UtZnVuY3Rpb25cbi8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3Rcbi8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3Jcbi8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuLy8gbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICBsZXQgdGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLFxuICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICBjb25zdCBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICBpZiAoY2FsbE5vdykgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgfTtcbn1cblxuLy8gRXJyb3IgbG9nZ2luZ1xuZnVuY3Rpb24gbG9nQWN0aW9uKG1lc3NhZ2UpIHtcbiAgaWYgKGlzU2VudHJ5SW5pdGlhbGl6ZWQoKSkge1xuICAgIFNlbnRyeS5hZGRCcmVhZGNydW1iKHtcbiAgICAgIGNhdGVnb3J5OiAnY29udGV4dG1lbnUnLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIGxldmVsOiAnaW5mbydcbiAgICB9KVxuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./CommonScripts/sharedscripts/sharedscripts-contextmenu.js\n");

/***/ }),

/***/ "./CommonScripts/sharedscripts/sharedscripts-contextmenucalendarandinspectors.js":
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ContextMenuForCalendarsAndInspectors\": function() { return /* binding */ ContextMenuForCalendarsAndInspectors; }\n/* harmony export */ });\n/* harmony import */ var _sharedscripts_contextmenu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./CommonScripts/sharedscripts/sharedscripts-contextmenu.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar ContextMenuForCalendarsAndInspectors = /*#__PURE__*/function () {\n  function ContextMenuForCalendarsAndInspectors(configuration) {\n    _classCallCheck(this, ContextMenuForCalendarsAndInspectors);\n    this.configuration = configuration;\n    this.hide = this.hide.bind(this);\n    this.initializeMenu();\n  }\n  _createClass(ContextMenuForCalendarsAndInspectors, [{\n    key: \"initializeMenu\",\n    value: function initializeMenu() {\n      var options = _objectSpread(_objectSpread({}, this.menuOptions()), {}, {\n        id: this.menuIdentifier()\n      });\n      var items = this.menuItems();\n      this.menu = new _sharedscripts_contextmenu__WEBPACK_IMPORTED_MODULE_0__.SharedscriptsContextmenu(items, options);\n      /* Set id on the menu elements and transfer permissions */\n      $(this.menu.menu).find('> li').each(function (index, element) {\n        $(element).attr('id', \"\".concat(options.id, \"_\").concat(index));\n        if ($(element).has('a').length > 0) $(element).find('> a').attr('permissions', items[index].permission);\n      });\n    }\n  }, {\n    key: \"separator\",\n    value: function separator(options) {\n      return _objectSpread(_objectSpread({}, options), {}, {\n        'a': 'separator'\n      });\n    }\n  }, {\n    key: \"actionItem\",\n    value: function actionItem(actionName, options) {\n      var _this = this;\n      var action = this.configuration.actions[actionName];\n      if (action) {\n        return _objectSpread(_objectSpread({}, options || {}), {}, {\n          'an': 'item',\n          'permission': action.permissions,\n          'id': action.id,\n          'text': action.name,\n          'fn': function fn(e) {\n            return action.fn(e, _this.actionCallbackContext());\n          }\n        });\n      } else {\n        throw new Error(\"Menu action with name \".concat(actionName, \" is not defined by the backend\"));\n      }\n    }\n  }, {\n    key: \"input\",\n    value: function input(placeholder, onEnter, options) {\n      return _objectSpread(_objectSpread({}, options), {}, {\n        'a': 'input',\n        'text': placeholder,\n        'onEnter': onEnter\n      });\n    }\n  }, {\n    key: \"search\",\n    value: function search(text, sourceFunction, selectionFunction, options) {\n      var _this2 = this;\n      return _objectSpread(_objectSpread({}, options || {}), {}, {\n        'a': 'search',\n        text: text,\n        'source': function source(searchTerm, response) {\n          return sourceFunction(searchTerm, _this2.actionCallbackContext(), response);\n        },\n        'select': function select(event, ui) {\n          selectionFunction(event, ui, _this2.actionCallbackContext());\n          _this2.close();\n        }\n      });\n    }\n  }, {\n    key: \"submenu\",\n    value: function submenu(actionName, menuItems, options) {\n      var action = this.configuration.actions[actionName];\n      return _objectSpread(_objectSpread({}, options), {}, {\n        'a': 'submenu',\n        'permission': action.permissions,\n        'id': action.id,\n        'text': action.name,\n        'with': menuItems\n      });\n    }\n  }, {\n    key: \"menuItems\",\n    value: function menuItems() {\n      throw new Error('Subclass should have overridden menuItems');\n    }\n  }, {\n    key: \"menuOptions\",\n    value: function menuOptions() {\n      throw new Error('Subclass should have overridden menuOptions');\n    }\n  }, {\n    key: \"menuIdentifier\",\n    value: function menuIdentifier() {\n      throw new Error('Subclass should have overridden menuIdentifier');\n    }\n  }, {\n    key: \"beforeMenuOpen\",\n    value: function beforeMenuOpen(contextMenuOpenEvent) {\n      throw new Error('Subclass should have overridden beforeMenuOpen');\n    }\n  }, {\n    key: \"beforeMenuClose\",\n    value: function beforeMenuClose() {\n      throw new Error('Subclass should have overridden beforeMenuClose');\n    }\n  }, {\n    key: \"afterMenuClose\",\n    value: function afterMenuClose() {\n      throw new Error('Subclass should have overridden afterMenuClose');\n    }\n  }, {\n    key: \"setPermissions\",\n    value: function setPermissions(contextMenuOpenEvent) {\n      throw new Error('Subclass should have overridden setPermissions');\n    }\n  }, {\n    key: \"actionCallbackContext\",\n    value: function actionCallbackContext() {\n      throw new Error('Subclass should have overridden actionCallbackContext');\n    }\n  }, {\n    key: \"setupDisablements\",\n    value: function setupDisablements() {\n      var _this3 = this;\n      this.menu.menu.find('> li > a[permissions]').each(function (index, element) {\n        if ($(element).attr('isdisable')) {\n          _this3.menu.disable($(element).parent().attr('data-menu-id'));\n          /* Make sure the anchor is updated as well */\n          $(element).addClass('disabled');\n        } else {\n          _this3.menu.enable($(element).parent().attr('data-menu-id'));\n          /* Make sure the anchor is updated as well */\n          $(element).removeClass('disabled');\n        }\n      });\n    }\n  }, {\n    key: \"open\",\n    value: function open(contextMenuOpenEvent) {\n      // Close the menu if it was already open somewhere else on the page\n      this.menu.close();\n      // Invoke the hook to perform behavior before opening the context menu\n      this.beforeMenuOpen(contextMenuOpenEvent);\n      // Keep track of the element on which we have opened the context menu\n      this.contextMenuTarget = contextMenuOpenEvent.target;\n      // Remove the disabled classes from the anchors, such that the disablements are set correctly\n      this.menu.menu.find('> li > a').removeClass('disabled');\n      this.menu.show(contextMenuOpenEvent.pageX, contextMenuOpenEvent.pageY);\n      // Invoke the hook that sets the permissions\n      this.setPermissions(contextMenuOpenEvent);\n      // Based on the manipulations of the hook method, update the disablements\n      this.setupDisablements();\n      $('body').on('click', this.hide);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide(event) {\n      if (event && event.isDefaultPrevented()) return;\n      // On a mac, it is possible to open the context menu by keeping the CTRL key pressed and clicking with the mouse\n      // In Safari, this click would trigger the hide method here, resulting in that the context menu briefly opens and then closes again\n      // Hence: if we are running on the mac, and the click is done while the ctrl key is pressed, we suppress hiding the menu.\n      if (this.menu.isMac && event.ctrlKey) return;\n      this.close();\n      $('body').off('click', this.hide);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.beforeMenuClose();\n      this.menu.close();\n      this.afterMenuClose();\n    }\n  }, {\n    key: \"contextMenuSelection\",\n    value: function contextMenuSelection() {\n      return $('.ui-selected');\n    }\n  }]);\n  return ContextMenuForCalendarsAndInspectors;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Db21tb25TY3JpcHRzL3NoYXJlZHNjcmlwdHMvc2hhcmVkc2NyaXB0cy1jb250ZXh0bWVudWNhbGVuZGFyYW5kaW5zcGVjdG9ycy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SZWFjdENvbXBvbmVudHNfLy4vQ29tbW9uU2NyaXB0cy9zaGFyZWRzY3JpcHRzL3NoYXJlZHNjcmlwdHMtY29udGV4dG1lbnVjYWxlbmRhcmFuZGluc3BlY3RvcnMuanM/MmEyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1NoYXJlZHNjcmlwdHNDb250ZXh0bWVudX0gZnJvbSAnLi9zaGFyZWRzY3JpcHRzLWNvbnRleHRtZW51JztcblxuZXhwb3J0IGNsYXNzIENvbnRleHRNZW51Rm9yQ2FsZW5kYXJzQW5kSW5zcGVjdG9ycyB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZ3VyYXRpb24pIHtcbiAgICB0aGlzLmNvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uO1xuICAgIHRoaXMuaGlkZSA9IHRoaXMuaGlkZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZU1lbnUoKTtcbiAgfVxuXG4gIGluaXRpYWxpemVNZW51KCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7IC4uLiB0aGlzLm1lbnVPcHRpb25zKCksIGlkOiB0aGlzLm1lbnVJZGVudGlmaWVyKCkgfTtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMubWVudUl0ZW1zKCk7XG4gICAgdGhpcy5tZW51ID0gbmV3IFNoYXJlZHNjcmlwdHNDb250ZXh0bWVudShpdGVtcywgb3B0aW9ucyk7XG4gICAgLyogU2V0IGlkIG9uIHRoZSBtZW51IGVsZW1lbnRzIGFuZCB0cmFuc2ZlciBwZXJtaXNzaW9ucyAqL1xuICAgICQodGhpcy5tZW51Lm1lbnUpXG4gICAgICAuZmluZCgnPiBsaScpXG4gICAgICAuZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcbiAgICAgICAgJChlbGVtZW50KS5hdHRyKCdpZCcsIGAke29wdGlvbnMuaWR9XyR7aW5kZXh9YCk7XG4gICAgICAgIGlmICgkKGVsZW1lbnQpLmhhcygnYScpLmxlbmd0aCA+IDApXG4gICAgICAgICAgJChlbGVtZW50KS5maW5kKCc+IGEnKS5hdHRyKCdwZXJtaXNzaW9ucycsIGl0ZW1zW2luZGV4XS5wZXJtaXNzaW9uKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgc2VwYXJhdG9yKG9wdGlvbnMpIHtcbiAgICByZXR1cm4geyAuLi5vcHRpb25zLCAnYSc6ICdzZXBhcmF0b3InfTtcbiAgfVxuXG4gIGFjdGlvbkl0ZW0oYWN0aW9uTmFtZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuY29uZmlndXJhdGlvbi5hY3Rpb25zW2FjdGlvbk5hbWVdO1xuICAgIGlmIChhY3Rpb24pIHtcbiAgICAgIHJldHVybiB7IC4uLm9wdGlvbnMgfHwge30sICdhbic6ICdpdGVtJywgJ3Blcm1pc3Npb24nOiBhY3Rpb24ucGVybWlzc2lvbnMsICdpZCc6IGFjdGlvbi5pZCwgJ3RleHQnOiBhY3Rpb24ubmFtZSwgJ2ZuJzogKGUpID0+IGFjdGlvbi5mbihlLCB0aGlzLmFjdGlvbkNhbGxiYWNrQ29udGV4dCgpKX07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWVudSBhY3Rpb24gd2l0aCBuYW1lICR7YWN0aW9uTmFtZX0gaXMgbm90IGRlZmluZWQgYnkgdGhlIGJhY2tlbmRgKTtcbiAgICB9XG4gIH1cblxuICBpbnB1dChwbGFjZWhvbGRlciwgb25FbnRlciwgb3B0aW9ucykge1xuICAgIHJldHVybiB7IC4uLm9wdGlvbnMsICdhJzogJ2lucHV0JywgJ3RleHQnOiBwbGFjZWhvbGRlciwgJ29uRW50ZXInOiBvbkVudGVyIH07XG4gIH1cblxuICBzZWFyY2godGV4dCwgc291cmNlRnVuY3Rpb24sIHNlbGVjdGlvbkZ1bmN0aW9uLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHsgLi4ub3B0aW9ucyB8fCB7fSxcbiAgICAgICdhJzogJ3NlYXJjaCcsXG4gICAgICB0ZXh0LFxuICAgICAgJ3NvdXJjZSc6IChzZWFyY2hUZXJtLCByZXNwb25zZSkgPT4gc291cmNlRnVuY3Rpb24oc2VhcmNoVGVybSwgdGhpcy5hY3Rpb25DYWxsYmFja0NvbnRleHQoKSwgcmVzcG9uc2UpLFxuICAgICAgJ3NlbGVjdCc6IChldmVudCwgdWkpID0+IHtcbiAgICAgICAgc2VsZWN0aW9uRnVuY3Rpb24oZXZlbnQsIHVpLCB0aGlzLmFjdGlvbkNhbGxiYWNrQ29udGV4dCgpKTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSB9O1xuICB9XG5cbiAgc3VibWVudShhY3Rpb25OYW1lLCBtZW51SXRlbXMsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBhY3Rpb24gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYWN0aW9uc1thY3Rpb25OYW1lXTtcbiAgICByZXR1cm4geyAuLi5vcHRpb25zLCAgJ2EnOiAnc3VibWVudScsICdwZXJtaXNzaW9uJzogYWN0aW9uLnBlcm1pc3Npb25zLCAnaWQnOiBhY3Rpb24uaWQsICd0ZXh0JzogYWN0aW9uLm5hbWUsICd3aXRoJzogbWVudUl0ZW1zIH07XG4gIH1cblxuICBtZW51SXRlbXMoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTdWJjbGFzcyBzaG91bGQgaGF2ZSBvdmVycmlkZGVuIG1lbnVJdGVtcycpO1xuICB9XG5cbiAgbWVudU9wdGlvbnMoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTdWJjbGFzcyBzaG91bGQgaGF2ZSBvdmVycmlkZGVuIG1lbnVPcHRpb25zJyk7XG4gIH1cblxuICBtZW51SWRlbnRpZmllcigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1YmNsYXNzIHNob3VsZCBoYXZlIG92ZXJyaWRkZW4gbWVudUlkZW50aWZpZXInKTtcbiAgfVxuXG4gIGJlZm9yZU1lbnVPcGVuKGNvbnRleHRNZW51T3BlbkV2ZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTdWJjbGFzcyBzaG91bGQgaGF2ZSBvdmVycmlkZGVuIGJlZm9yZU1lbnVPcGVuJyk7XG4gIH1cblxuICBiZWZvcmVNZW51Q2xvc2UoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTdWJjbGFzcyBzaG91bGQgaGF2ZSBvdmVycmlkZGVuIGJlZm9yZU1lbnVDbG9zZScpO1xuICB9XG5cbiAgYWZ0ZXJNZW51Q2xvc2UoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTdWJjbGFzcyBzaG91bGQgaGF2ZSBvdmVycmlkZGVuIGFmdGVyTWVudUNsb3NlJyk7XG4gIH1cblxuICBzZXRQZXJtaXNzaW9ucyhjb250ZXh0TWVudU9wZW5FdmVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignU3ViY2xhc3Mgc2hvdWxkIGhhdmUgb3ZlcnJpZGRlbiBzZXRQZXJtaXNzaW9ucycpO1xuICB9XG5cbiAgYWN0aW9uQ2FsbGJhY2tDb250ZXh0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignU3ViY2xhc3Mgc2hvdWxkIGhhdmUgb3ZlcnJpZGRlbiBhY3Rpb25DYWxsYmFja0NvbnRleHQnKTtcbiAgfVxuXG4gIHNldHVwRGlzYWJsZW1lbnRzKCkge1xuICAgIHRoaXMubWVudS5tZW51LmZpbmQoJz4gbGkgPiBhW3Blcm1pc3Npb25zXScpLmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgICBpZiAoJChlbGVtZW50KS5hdHRyKCdpc2Rpc2FibGUnKSkge1xuICAgICAgICB0aGlzLm1lbnUuZGlzYWJsZSgkKGVsZW1lbnQpLnBhcmVudCgpLmF0dHIoJ2RhdGEtbWVudS1pZCcpKTtcbiAgICAgICAgLyogTWFrZSBzdXJlIHRoZSBhbmNob3IgaXMgdXBkYXRlZCBhcyB3ZWxsICovXG4gICAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1lbnUuZW5hYmxlKCQoZWxlbWVudCkucGFyZW50KCkuYXR0cignZGF0YS1tZW51LWlkJykpO1xuICAgICAgICAvKiBNYWtlIHN1cmUgdGhlIGFuY2hvciBpcyB1cGRhdGVkIGFzIHdlbGwgKi9cbiAgICAgICAgJChlbGVtZW50KS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG9wZW4oY29udGV4dE1lbnVPcGVuRXZlbnQpIHtcbiAgICAvLyBDbG9zZSB0aGUgbWVudSBpZiBpdCB3YXMgYWxyZWFkeSBvcGVuIHNvbWV3aGVyZSBlbHNlIG9uIHRoZSBwYWdlXG4gICAgdGhpcy5tZW51LmNsb3NlKCk7XG4gICAgLy8gSW52b2tlIHRoZSBob29rIHRvIHBlcmZvcm0gYmVoYXZpb3IgYmVmb3JlIG9wZW5pbmcgdGhlIGNvbnRleHQgbWVudVxuICAgIHRoaXMuYmVmb3JlTWVudU9wZW4oY29udGV4dE1lbnVPcGVuRXZlbnQpO1xuICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIGVsZW1lbnQgb24gd2hpY2ggd2UgaGF2ZSBvcGVuZWQgdGhlIGNvbnRleHQgbWVudVxuICAgIHRoaXMuY29udGV4dE1lbnVUYXJnZXQgPSBjb250ZXh0TWVudU9wZW5FdmVudC50YXJnZXQ7XG4gICAgLy8gUmVtb3ZlIHRoZSBkaXNhYmxlZCBjbGFzc2VzIGZyb20gdGhlIGFuY2hvcnMsIHN1Y2ggdGhhdCB0aGUgZGlzYWJsZW1lbnRzIGFyZSBzZXQgY29ycmVjdGx5XG4gICAgdGhpcy5tZW51Lm1lbnUuZmluZCgnPiBsaSA+IGEnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICB0aGlzLm1lbnUuc2hvdyhjb250ZXh0TWVudU9wZW5FdmVudC5wYWdlWCwgY29udGV4dE1lbnVPcGVuRXZlbnQucGFnZVkpO1xuICAgIC8vIEludm9rZSB0aGUgaG9vayB0aGF0IHNldHMgdGhlIHBlcm1pc3Npb25zXG4gICAgdGhpcy5zZXRQZXJtaXNzaW9ucyhjb250ZXh0TWVudU9wZW5FdmVudCk7XG4gICAgLy8gQmFzZWQgb24gdGhlIG1hbmlwdWxhdGlvbnMgb2YgdGhlIGhvb2sgbWV0aG9kLCB1cGRhdGUgdGhlIGRpc2FibGVtZW50c1xuICAgIHRoaXMuc2V0dXBEaXNhYmxlbWVudHMoKTtcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgdGhpcy5oaWRlKTtcbiAgfVxuXG4gIGhpZGUoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQgJiYgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVybjtcbiAgICAvLyBPbiBhIG1hYywgaXQgaXMgcG9zc2libGUgdG8gb3BlbiB0aGUgY29udGV4dCBtZW51IGJ5IGtlZXBpbmcgdGhlIENUUkwga2V5IHByZXNzZWQgYW5kIGNsaWNraW5nIHdpdGggdGhlIG1vdXNlXG4gICAgLy8gSW4gU2FmYXJpLCB0aGlzIGNsaWNrIHdvdWxkIHRyaWdnZXIgdGhlIGhpZGUgbWV0aG9kIGhlcmUsIHJlc3VsdGluZyBpbiB0aGF0IHRoZSBjb250ZXh0IG1lbnUgYnJpZWZseSBvcGVucyBhbmQgdGhlbiBjbG9zZXMgYWdhaW5cbiAgICAvLyBIZW5jZTogaWYgd2UgYXJlIHJ1bm5pbmcgb24gdGhlIG1hYywgYW5kIHRoZSBjbGljayBpcyBkb25lIHdoaWxlIHRoZSBjdHJsIGtleSBpcyBwcmVzc2VkLCB3ZSBzdXBwcmVzcyBoaWRpbmcgdGhlIG1lbnUuXG4gICAgaWYgKHRoaXMubWVudS5pc01hYyAmJiBldmVudC5jdHJsS2V5KSByZXR1cm47XG4gICAgdGhpcy5jbG9zZSgpO1xuICAgICQoJ2JvZHknKS5vZmYoJ2NsaWNrJywgdGhpcy5oaWRlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuYmVmb3JlTWVudUNsb3NlKCk7XG4gICAgdGhpcy5tZW51LmNsb3NlKCk7XG4gICAgdGhpcy5hZnRlck1lbnVDbG9zZSgpO1xuICB9XG5cbiAgY29udGV4dE1lbnVTZWxlY3Rpb24oKSB7XG4gICAgcmV0dXJuICQoJy51aS1zZWxlY3RlZCcpO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./CommonScripts/sharedscripts/sharedscripts-contextmenucalendarandinspectors.js\n");

/***/ }),

/***/ "./CommonScripts/sharedscripts/sharedscripts-sentry.js":
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"isSentryInitialized\": function() { return /* binding */ isSentryInitialized; }\n/* harmony export */ });\n/* harmony import */ var _sentry_browser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/@sentry/hub/esm/hub.js\");\n/* harmony import */ var _sentry_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/@sentry/browser/esm/index.js\");\n\nfunction isSentryInitialized() {\n  return _sentry_browser__WEBPACK_IMPORTED_MODULE_0__.getCurrentHub().getClient() !== undefined;\n}\n__webpack_require__.g.Sentry = _sentry_browser__WEBPACK_IMPORTED_MODULE_1__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9Db21tb25TY3JpcHRzL3NoYXJlZHNjcmlwdHMvc2hhcmVkc2NyaXB0cy1zZW50cnkuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL1JlYWN0Q29tcG9uZW50c18vLi9Db21tb25TY3JpcHRzL3NoYXJlZHNjcmlwdHMvc2hhcmVkc2NyaXB0cy1zZW50cnkuanM/ZTk3NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBTZW50cnkgZnJvbSBcIkBzZW50cnkvYnJvd3NlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNTZW50cnlJbml0aWFsaXplZCgpIHtcbiAgcmV0dXJuIFNlbnRyeS5nZXRDdXJyZW50SHViKCkuZ2V0Q2xpZW50KCkgIT09IHVuZGVmaW5lZFxufVxuXG5nbG9iYWwuU2VudHJ5ID0gU2VudHJ5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./CommonScripts/sharedscripts/sharedscripts-sentry.js\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["vendor"], function() { return __webpack_exec__("./CommonScripts/eventinspector.js"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ ReactComponents_eventinspector = __webpack_exports__;
/******/ }
]);